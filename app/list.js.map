{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/global.js","webpack:////Volumes/Dev/Gradle/Chrome/lib/base/util.js","webpack:////Volumes/Dev/Gradle/Chrome/adb/adb.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/isarray/index.js","webpack:////Volumes/Dev/Gradle/Chrome/adb/adb-chrome-usb.js","webpack:////Volumes/Dev/Gradle/Chrome/adb/adb-web-usb.js","webpack:////Volumes/Dev/Gradle/Chrome/lib/socket/socket.js","webpack:///./src/modal.js","webpack:///./src/device-settings.js","webpack:///./node_modules/process/browser.js","webpack:///./src/list.js","webpack:///./src/farm-access.js","webpack:///./node_modules/buffer/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","e","window","make4Len16","len","len16","toString","length","ab2str","buf","constructor","Uint8Array","String","fromCharCode","apply","decodeURIComponent","escape","str2ab","str","terminate","unescape","encodeURIComponent","ArrayBuffer","bufView","strLen","charCodeAt","slashN","writeString","socket","cb","JSON","stringify","write","appendBuffer","buffer1","buffer2","tmp","byteLength","set","sliceArrayBuffer","buffer","slice","byteOffset","Number","pad","size","Date","getTime","b64map","startsWith","configurable","writable","searchString","position","lastIndexOf","fromArray","arr","ret","val","$","ajaxTransport","options","originalOptions","jqXHR","FormData","dataType","data","Blob","send","headers","callback","xhr","XMLHttpRequest","url","type","async","responseType","username","password","addEventListener","response","status","statusText","getAllResponseHeaders","open","setRequestHeader","abort","cache","_isNode","Success","dummy","gen","iter","next","done","pResolve","pReject","promise","Promise","resolve","reject","prepNextAsyncCall","errorCallback","throw","Error","arguments","successCallback","haveIter","error","success","then","catch","navigator","isNode","isElectron","userAgent","indexOf","sharedGlobals","current","IS_RELEASE","console","log","warn","info","wrap","f","save","Array","getConsoleLog","gistConsoleLog","files","chrome","runtime","getBackgroundPage","background","getLogFromWindow","promises","app","getAll","map","w","contentWindow","id","all","gist","getManifest","fetch","method","body","json","html_url","args","join","content","readString","onClose","read","reader","readLine","pending","readMore","keep","subarray","push","b","remaining","unshift","writeLine","base64ToArrayBuffer","base64","binary_string","atob","bytes","ascii","nextTick","setTimeout","getAuthToken","interactive","identity","process","scopes","token","lastError","throttleTimeout","item","throttle","immediate","items","timeout","onTimeout","bufferToHex","view","hexToBuffer","substr","parseInt","readLenLoop","littleEndian","headerReader","destroy","DataView","getInt32","payloadReader","readHeader","arrayBufferToBase64","binary","btoa","writeLenData","ab","setInt32","makeUUID","s4","Math","floor","random","substring","readLenPackets","inRead","packets","undefined","hex2b64","h","charAt","showNotification","text","iconUrl","notifications","manifest","appName","icons","title","message","getQueryVariable","variable","location","vars","search","split","pair","isBrowser","copyTextToClipboard","textArea","document","createElement","style","top","left","width","height","padding","border","outline","boxShadow","appendChild","select","execCommand","err","removeChild","Socket","Server","AdbChromeUsbTransport","AdbWebUsbTransport","getUserSelectedDevices","AdbTcpTransport","zero_mask","currentRead","resultCode","AdbDevice","transport","onConnected","currentSocketId","sockets","forwards","maxPayload","MAX_PAYLOAD","parseConnectionPayload","payload","splits","replace","parts","AdbSocket","device","socketId","localId","AdbServer","port","start","pendingDevices","adbDevices","clients","AdbClient","server","usb","writing","pendingWrites","shift","fatal","onError","dataReceived","each","listener","kCommandSYNC","kCommandCNXN","kCommandOPEN","kCommandOKAY","kCommandCLSE","kCommandWRTE","kCommandAUTH","kAuthToken","kAuthSignature","kAuthRSAPublicKey","ADB_PROTOCOL_VERSION","ADB_VERSION","checksum","sum","sendMessage","command","arg0","arg1","appendZero","bodyLength","copy","header","setUint32","result","getKey","storage","local","adbkey","JSEncrypt","default_key_size","setPrivateKey","getPrivateKeyB64","keyString","localStorage","getItem","parse","setItem","_convertToMinCrypt","rsaKey","B32","BigInteger","ONE","shiftLeft","N","clone","R","pow","RR","multiply","mod","pkey","Uint32Array","bitLength","subtract","modInverse","intValue","j","numWords","divide","hexStr","u8view","digit","sign","rsakey","array","ASN1_PREAMBLE","padEnd","msg","doPrivate","toByteArray","handleUnknown","remoteId","handleMessage","getUint32","onOpenSocket","sentSignature","publicKey","signed","pendingWrite","wrote","rawProperties","properties","paused","onReceiveMessage","transferLen","receiveMessages","forwardPort","forwardingServer","listen","fromPort","address","localSocket","newSocket","to","remoteSocket","stream","newAdbSocket","createSocket","service","toWrite","min","buffered","pause","resume","onPause","onResume","remoteSocketId","connect","host","adbSocket","refreshing","dummyListen","client","receiveHeader","isRunning","kill","withAdbDevice","adb","serialno","internalOnDevicesChanged","withSerial","trim","tryDevice","tryInterface","number","interfaceNumber","claimInterface","iface","newTransport","connectUsbAdb","listInterfaces","interfaces","usedHandle","interfaceClass","interfaceSubclass","interfaceProtocol","close","refreshDevice","serialNumber","usbDevice","tracking","getDevicesString","stop","resolveTransport","num","keys","longformDevices","devices","writeDevices","handlePayload","commandParts","hostCmd","splice","isInteger","features","remoteHost","remotePort","remote","forwardParts","from","receivePayload","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","fromByteArray","uint8","extraBytes","len2","encodeChunk","lookup","code","end","output","offset","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","Infinity","rt","abs","isNaN","LN2","isArray","ChromeUsbDevice","vendorId","productId","connectionHandle","openDevice","closeDevice","AdbUsbTransport","handle","endpoint","endpoints","maximumPacketSize","direction","in","out","releaseInterface","transfer","bulkTransfer","filters","WebUsbDevice","configuration","selectConfiguration","alternate","alternates","interfaceName","packetSize","transferOut","endpointNumber","transferIn","requestDevice","classCode","subclassCode","protocolCode","Buffer","hasChromeSockets","tcp","onReceive","addListener","resultData","readers","onReceiveError","tcpServer","onAccept","acceptInfo","setPaused","clientSocketId","listeners","ignored","createInfo","connected","on","pump","s1","s2","writeDone","eat","pendingCallback","closed","argc","pendingLength","totalRead","bufferedLength","add","need","part","leftover","bufferWrites","originalCallback","writeInfo","bytesSent","asUint8Array","pl","__proto__","listening","getInfo","localAddress","localPort","createServer","showModal","opts","clickedOk","modal","ok","find","cancel","unbind","cancelButton","okButton","hideCancel","hide","show","html","click","duration","shortModal","sanitizeDeviceSettings","deviceSettings","friendlyName","loadAllDeviceSettings","vals","commonDisplaySettings","density","freeSize","populateDisplaySettings","Option","append","loadDeviceSettings","defaults","showSoftKeys","pinTitleBar","alwaysOnTop","bitrate","resolution","decoder","displaySettings","dimDisplay","applyDeviceSettings","prop","change","dname","matched","autoAudio","saveDeviceSettings","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","run","marker","runClearTimeout","Item","noop","browser","env","argv","version","versions","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","getVysorWhitelistStatus","selectDevices","vidpid","tracker","sendEvent","adbServer","buttons","refreshLoginState","getProfileUserInfo","email","_lm","_md","managementUrl","refresh","managementText","attr","refreshListWithLicense","_il","libind","feature","fb","startPurchase","openDeviceSettings","deviceName","existing","showSettings","edit","commit","newName","updateDeviceName","which","getDefaultDeviceSettings","checked","selectedIndex","onSignInChanged","_rl","ready","platform","toLowerCase","keyboard","updateKeyboard","innerBounds","minWidth","minHeight","onClosed","lastAdbDevices","me","reload","reset","remove","startDeviceFarm","vysorShareServerUrl","updateVysorShareServer","stopDeviceFarm","connectAuto","lastConnectAddress","Adb","sendHostCommand","survey0","checkUsage","vysorUsage","hoursUsed","round","sendAppView","lastVysorSharedDevices","lastVysorDeviceFarms","findDeviceElement","ele","onButtonClicked","nid","bid","refreshList","vysorVirtualDevices","myUserInfo","vysorDeviceFarms","vysorSharedDevices","tcpSerialMappings","serialTcpMappings","vysorShareServer","hadAdbServer","adbServerIsRunning","adbPort","farms","index","found","farm","share","img","stopPropagation","userInfo","blobFromUrl","picture","blob","startWireless","removeClass","addClass","disconnectSharedDevice","toggleShare","wirelessSerial","closeWindow","openWindow","unshareDevice","display","llibind","farmList","farmEle","destroyDeviceFarmConnection","displaySerial","gcmConn","gcmConns","promptKick","sharedDevices","createDeviceFarmConnection","quietSerial","getWhitelist","whitelist","saveWhitelist","serverMode","isWhitelisted","ajax","clearWhitelist","addToWhitelist","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","arg","encodingOrOffset","allocUnsafe","TypeError","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","fromString","obj","isBuffer","fromObject","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","hexWrite","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","swap16","swap32","swap64","equals","inspect","max","match","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","toHex","checkOffset","ext","checkInt","objectWriteUInt16","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","stringtrim","base64clean","src","dst"],"mappings":"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","file":"list.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 66);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function makeUUID() {\n  function s4() {\n    return Math.floor((1 + Math.random()) * 0x10000)\n      .toString(16)\n      .substring(1);\n  }\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\nfunction nextTick(cb) {\n  setTimeout(cb, 0);\n}\n\nfunction prefixLen416(str) {\n  return make4Len16(str.length) + str;\n}\n\nfunction make4Len16(len) {\n  var len16 = len.toString(16);\n  while (len16.length < 4) {\n    len16 = '0' + len16;\n  }\n  return len16;\n}\n\nfunction encode_utf8(s) {\n  return unescape(encodeURIComponent(s));\n}\n\nfunction decode_utf8(s) {\n  return decodeURIComponent(escape(s));\n}\n\nfunction ab2str(buf) {\n  if (buf.constructor.name == 'ArrayBuffer') {\n    buf = new Uint8Array(buf);\n  }\n  return decode_utf8(String.fromCharCode.apply(null, buf));\n}\n\nfunction str2ab(str, buf, terminate) {\n  str = encode_utf8(str);\n  var len = str.length;\n  if (terminate)\n    len++;\n  if (!buf) {\n    buf = new ArrayBuffer(len);\n  }\n  var bufView = new Uint8Array(buf);\n  if (terminate)\n    bufView[str.length] = 0;\n  for (var i=0, strLen=str.length; i<strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\n\nvar slashN = '\\n'.charCodeAt(0);\n\nUint8Array.prototype.sliceArrayBuffer = function() {\n  return this.buffer.slice(this.byteOffset, this.byteOffset + this.byteLength);\n}\n\nNumber.prototype.pad = function(size) {\n    var s = String(this);\n    while (s.length < (size || 2)) {s = \"0\" + s;}\n    return s;\n}\n\nfunction writeLine(socket, str, cb) {\n  if (str.constructor.name == 'Object')\n    str = JSON.stringify(str);\n  writeString(socket, str + '\\n', cb);\n}\n\nfunction readLine(socket, cb) {\n  var pending = [];\n  function readMore() {\n    socket.read(function(buffer) {\n      for (var i = 0; i < buffer.byteLength; i++) {\n        if (buffer[i] == slashN) {\n          var keep = buffer.subarray(0, i);\n          pending.push(keep);\n          var data = \"\";\n          for (var b in pending) {\n            b = pending[b];\n            data += ab2str(b);\n          }\n\n          var remaining = buffer.subarray(i + 1);\n          socket.unshift(remaining);\n\n          cb(data);\n          return;\n        }\n      }\n\n      // we require more minerals\n      pending.push(buffer);\n      readMore();\n    });\n  }\n\n  readMore();\n}\n\nfunction readLenPackets(socket, cb, littleEndian) {\n  var inRead;\n\n  var headerReader = function(data) {\n    if (data.byteLength != 4) {\n      socket.destroy();\n      cb(null);\n      return;\n    }\n    var lenBuf = new DataView(data.buffer, data.byteOffset, 4);\n    var len = lenBuf.getInt32(0, littleEndian);\n\n    if (!inRead) {\n      inRead = [];\n      socket.read(len, payloadReader);\n      var packets = inRead;\n      inRead = undefined;\n      if (packets.length) {\n        cb(packets);\n      }\n    }\n    else {\n      socket.read(len, payloadReader);\n    }\n  }\n\n  var payloadReader = function(data) {\n    if (inRead) {\n      inRead.push(data);\n    }\n    else {\n      cb([data]);\n    }\n    readHeader();\n  }\n\n  var readHeader = function() {\n    socket.read(4, headerReader);\n  }\n\n  readHeader();\n}\n\nfunction readLenLoop(socket, cb, littleEndian) {\n  var headerReader = function(data) {\n    if (data.byteLength != 4) {\n      socket.destroy();\n      cb(null);\n      return;\n    }\n    var lenBuf = new DataView(data.buffer, data.byteOffset, 4);\n    var len = lenBuf.getInt32(0, littleEndian);\n    socket.read(len, payloadReader);\n  }\n\n  var payloadReader = function(data) {\n    cb(data);\n    readHeader();\n  }\n\n  var readHeader = function() {\n    socket.read(4, headerReader);\n  }\n\n  readHeader();\n}\n\nfunction writeLenData(socket, data, cb, littleEndian) {\n  var ab = new ArrayBuffer(4);\n  var lenBuf = new DataView(ab);\n  lenBuf.setInt32(0, data.byteLength, littleEndian);\n  socket.write(appendBuffer(new Uint8Array(ab), new Uint8Array(data)).buffer, cb);\n}\n\nfunction readString(socket, cb) {\n  var str = '';\n  socket.onClose = function() {\n    cb(str);\n  }\n  function reader(data) {\n    str += ab2str(data);\n    socket.read(reader);\n  }\n  socket.read(reader);\n}\n\nfunction writeString(socket, str, cb) {\n  if (str.constructor.name == 'Object')\n    str = JSON.stringify(str);\n  socket.write(str2ab(str), cb);\n}\n\nfunction appendBuffer(buffer1, buffer2) {\n  var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n  tmp.set(buffer1, 0);\n  tmp.set(buffer2, buffer1.byteLength);\n  return tmp;\n}\n\nvar timeThing = new Date().getTime();\nfunction timeTrace(stamp) {\n  var now = new Date().getTime();\n  console.log(stamp + \": \" + (now - timeThing));\n  timeThing = now;\n}\n\n\nfunction bufferToHex(buffer) {\n  var view = new Uint8Array(buffer);\n  var ret = '';\n\n  for (var b in view) {\n    b = view[b];\n    if(b < 0x10)\n      ret += \"0\" + b.toString(16);\n    else\n      ret += b.toString(16);\n  }\n\n  return ret;\n}\n\nfunction hexToBuffer(str) {\n  var buf = new ArrayBuffer(str.length / 2);\n  var view = new Uint8Array(buf);\n  for (var i = 0; i < str.length / 2; i++) {\n    var c = str.substr(i * 2, 2);\n    view[i] = parseInt(c, 16);\n  }\n  return buf;\n}\n\nfunction base64ToArrayBuffer(base64) {\n    var binary_string =  window.atob(base64);\n    var len = binary_string.length;\n    var bytes = new Uint8Array( len );\n    for (var i = 0; i < len; i++)        {\n        var ascii = binary_string.charCodeAt(i);\n        bytes[i] = ascii;\n    }\n    return bytes.buffer;\n}\n\nfunction arrayBufferToBase64( buffer ) {\n    var binary = ''\n    var bytes = new Uint8Array( buffer )\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode( bytes[ i ] )\n    }\n    return window.btoa( binary );\n}\n\nvar b64map=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar b64pad=\"=\";\n\nfunction hex2b64(h) {\n  var i;\n  var c;\n  var ret = \"\";\n  for(i = 0; i+3 <= h.length; i+=3) {\n    c = parseInt(h.substring(i,i+3),16);\n    ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\n  }\n  if(i+1 == h.length) {\n    c = parseInt(h.substring(i,i+1),16);\n    ret += b64map.charAt(c << 2);\n  }\n  else if(i+2 == h.length) {\n    c = parseInt(h.substring(i,i+2),16);\n    ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\n  }\n  while((ret.length & 3) > 0) {\n    ret += b64pad;\n  }\n  return ret;\n}\n\nif (!String.prototype.startsWith) {\n  Object.defineProperty(String.prototype, 'startsWith', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function (searchString, position) {\n      position = position || 0;\n      return this.lastIndexOf(searchString, position) === position;\n    }\n  });\n}\n\nfunction getQueryVariable(variable, url) {\n    if (!url)\n      url = window.location;\n    var query = url.search.substring(1);\n    var vars = query.split('&');\n    for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split('=');\n        if (decodeURIComponent(pair[0]) == variable) {\n            return decodeURIComponent(pair[1]);\n        }\n    }\n    // console.log('Query variable %s not found', variable);\n}\n\nObject.fromArray = function(arr) {\n  var ret = {};\n  for (var i in arr) {\n    var val = arr[i]\n    ret[val] = val;\n  }\n  return ret;\n}\n\n\n/**\n *\n * jquery.binarytransport.js\n *\n * @description. jQuery ajax transport for making binary data type requests.\n * @version 1.0\n * @author Henry Algus <henryalgus@gmail.com>\n *\n */\n\ntry {\n// use this transport for \"binary\" data type\n$.ajaxTransport(\"+binary\", function(options, originalOptions, jqXHR) {\n  // check for conditions and support for blob / arraybuffer response type\n  if (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob))))) {\n    return {\n      // create new XMLHttpRequest\n      send: function(headers, callback) {\n        // setup all variables\n        var xhr = new XMLHttpRequest(),\n          url = options.url,\n          type = options.type,\n          async = options.async || true,\n          // blob or arraybuffer. Default is blob\n          dataType = options.responseType || \"blob\",\n          data = options.data || null,\n          username = options.username || null,\n          password = options.password || null;\n\n        xhr.addEventListener('load', function() {\n          var data = {};\n          data[options.dataType] = xhr.response;\n          // make callback and send data\n          callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());\n        });\n\n        xhr.addEventListener('error', function() {\n          callback(xhr.status, xhr.statusText, null, xhr.getAllResponseHeaders());\n        });\n\n        xhr.open(type, url, async, username, password);\n\n        // setup custom headers\n        for (var i in headers) {\n          xhr.setRequestHeader(i, headers[i]);\n        }\n\n        xhr.responseType = dataType;\n        xhr.send(data);\n      },\n      abort: function() {\n        jqXHR.abort();\n      }\n    };\n  }\n});\n}\ncatch (e) {}\n\nfunction throttleTimeout(token, item, throttle, cb, immediate) {\n  if (!token)\n    token = { items:[] };\n  token.items.push(item);\n  if (!token.timeout) {\n    function onTimeout() {\n      delete token.timeout;\n      cb(token.items);\n      token.items = [];\n    }\n    if (immediate)\n      onTimeout(token.items);\n    token.timeout = setTimeout(onTimeout, throttle);\n  }\n  return token;\n}\n\n\nfunction copyTextToClipboard(text) {\n  var textArea = document.createElement(\"textarea\");\n\n  //\n  // *** This styling is an extra step which is likely not required. ***\n  //\n  // Why is it here? To ensure:\n  // 1. the element is able to have focus and selection.\n  // 2. if element was to flash render it has minimal visual impact.\n  // 3. less flakyness with selection and copying which **might** occur if\n  //    the textarea element is not visible.\n  //\n  // The likelihood is the element won't even render, not even a flash,\n  // so some of these are just precautions. However in IE the element\n  // is visible whilst the popup box asking the user for permission for\n  // the web page to copy to the clipboard.\n  //\n\n  // Place in top-left corner of screen regardless of scroll position.\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0;\n\n  // Ensure it has a small width and height. Setting to 1px / 1em\n  // doesn't work as this gives a negative w/h on some browsers.\n  textArea.style.width = '2em';\n  textArea.style.height = '2em';\n\n  // We don't need padding, reducing the size if it does flash render.\n  textArea.style.padding = 0;\n\n  // Clean up any borders.\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none';\n\n  // Avoid flash of white box if rendered for any reason.\n  textArea.style.background = 'transparent';\n\n\n  textArea.value = text;\n\n  document.body.appendChild(textArea);\n\n  textArea.select();\n\n  try {\n    var successful = document.execCommand('copy');\n    // var msg = successful ? 'successful' : 'unsuccessful';\n    // console.log('Copying text command was ' + msg);\n  } catch (err) {\n    console.log('Oops, unable to copy');\n  }\n\n  document.body.removeChild(textArea);\n}\n\nfunction showNotification(text, iconUrl) {\n  console.log('notification:', text);\n  if (!window.chrome || !window.chrome.notifications)\n    return;\n  var manifest = chrome.runtime.getManifest();\n  var appName = manifest.name;\n  iconUrl = iconUrl || manifest.icons[128];\n  chrome.notifications.create({\n    type: \"basic\",\n    iconUrl: iconUrl,\n    title: appName,\n    message: text\n  });\n}\n\nvar blobFromUrl = (function() {\n  var cache = {};\n\n  return function(url, cb) {\n    if (cache[url]) {\n      cb(cache[url]);\n      return;\n    }\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.responseType = 'blob';\n    xhr.onload = function(e) {\n      cb(cache[url] = window.URL.createObjectURL(this.response));\n    };\n\n    xhr.send();\n  }\n})();\n\n\nfunction Success() {\n}\n\n(function() {\n\nfunction* dummy() {\n\n}\nvar n = dummy()\nn.constructor.prototype.async = function() {\n  var gen = this;\n  var iter = gen.next();\n  if (iter.done)\n    return;\n\n  var pResolve;\n  var pReject;\n\n  var promise = new Promise(function(resolve, reject) {\n    pResolve = resolve;\n    pReject = reject;\n    // do a thing, possibly async, then…\n  });\n\n  function errorCallback() {\n    iter = gen.throw(new Error(arguments))\n    prepNextAsyncCall();\n  }\n\n  function successCallback() {\n    var ret = arguments[0];\n    iter = gen.next(ret)\n    prepNextAsyncCall();\n  }\n\n  function prepNextAsyncCall(haveIter) {\n    var error;\n    var success;\n\n    if (iter.done) {\n      pResolve(iter.value);\n      return;\n    }\n\n    // implicit success callback here.\n    if (!iter.value) {\n      iter = gen.next(successCallback)\n      return;\n    }\n\n    if (iter.value.constructor == Promise) {\n      iter.value\n      .then(successCallback)\n      .catch(errorCallback);\n\n      // does not need to send anything back\n      // iter = gen.next();\n      return;\n    }\n    else if (iter.value.constructor == n.constructor) {\n      var promise = iter.value.async();\n      promise\n      .then(successCallback)\n      .catch(errorCallback);\n      return;\n    }\n\n    if (iter.value == Error) {\n      error = true;\n      iter = gen.next(errorCallback)\n    }\n    else if (iter.value == Success) {\n      success = true;\n      iter = gen.next(successCallback)\n    }\n    else {\n      throw new Error('Unexpected yield value for callback. Only Error and Success allowed.')\n    }\n\n    if (!iter.value)\n      throw new Error('Double yield callbacks must explicitly define both Error and Success')\n\n    if (iter.value == Error && error)\n      throw new Error('Error callback already defined');\n    else if (iter.value == Success && success)\n      throw new Error('Success callback already defined');\n    else if (iter.value != Error && iter.value != Success)\n      throw new Error('Unexpected yield value for callback. Only Error and Success allowed.')\n\n    try {\n      if (error)\n        iter = gen.next(successCallback)\n      else\n        iter = gen.next(errorCallback)\n    }\n    catch (e) {\n      pReject(e);\n    }\n  }\n\n  prepNextAsyncCall();\n  return promise;\n}\n\n\n})();\n\nfunction spewSocket(socket) {\n  socket.read(function(data) {\n    console.log(ab2str(data))\n    spewSocket(socket);\n  })\n}\n\nfunction getAuthToken(interactive, cb) {\n  if (!window.chrome || !window.chrome.identity) {\n    console.error('no auth token implemented');\n    process.nextTick(cb);\n    return;\n  }\n\n  chrome.identity.getAuthToken({\n    interactive: interactive,\n    // must use the exact same scopes used to submit the license or the token shits\n    scopes:\n    ['https://www.googleapis.com/auth/userinfo.profile',\n    'https://www.googleapis.com/auth/userinfo.email',\n    'https://www.googleapis.com/auth/chromewebstore.readonly']\n  },\n  function(token) {\n    if (!token)\n      console.error('unable to get authToken', chrome.runtime.lastError)\n    cb(token);\n  });\n}\n\nvar _isNode;\ntry {\n  // node will never have naviagor... electron and browser will\n  _isNode = !navigator;\n\n}\ncatch (e) {\n  _isNode = true;\n}\n\nfunction isNode() {\n  return _isNode;\n}\n\nfunction isElectron() {\n  return navigator.userAgent.indexOf('Electron') != -1;\n}\n\nfunction isBrowser() {\n  return !window.chrome || !window.chrome.app || !window.chrome.app.window;\n}\n\nif (!isNode() && !isElectron()) {\n  window.sharedGlobals = window;\n}\n\n(function() {\n  if (isNode()) return;\n  \n  var current = '';\n\n  function save(args) {\n    try {\n      for (var i in args) {\n        if (args[i] && args[i].constructor != String)\n          args[i] = JSON.stringify(args[i]);\n      }\n      current += args.join(' ') + '\\n';\n    }\n    catch (e) {\n    }\n  }\n\n\n  if (window.IS_RELEASE) {\n    var log = console.log;\n    var error = console.error;\n    var warn = console.warn;\n    var info = console.info;\n\n    function wrap(f) {\n      return function() {\n        f.apply(console, arguments);\n        save(Array.prototype.slice.call(arguments))\n      }\n    }\n\n    console.error = wrap(console.error);\n    console.log = wrap(console.log);\n    console.warn = wrap(console.warn);\n    console.info = wrap(console.info);\n  }\n\n  sharedGlobals.getConsoleLog = function(cb) {\n    cb(current);\n  }\n\n  function getLogFromWindow(w) {\n    return new Promise(function(resolve, reject) {\n      if (!w.getConsoleLog) {\n        resolve('getConsoleLog not found');\n        return;\n      }\n      w.getConsoleLog(function(log) {\n        resolve({\n          content: log && log.length ? log : 'log is empty'\n        });\n      })\n    })\n  }\n\n  window.gistConsoleLog = function(files, cb) {\n    chrome.runtime.getBackgroundPage(function(background) {\n      getLogFromWindow(background)\n      .then(function(log) {\n        files['background.txt'] = log;\n\n        var windows = chrome.app.window.getAll();\n        var promises = windows.map(function(w) {\n          return getLogFromWindow(w.contentWindow)\n          .then(function(log) {\n            files['window-' + w.id + '.txt'] = log;\n          })\n        })\n\n        return Promise.all(promises);\n      })\n      .then(function() {\n        var gist = {\n          \"description\": chrome.runtime.getManifest().name + ' console log',\n          \"public\": false,\n          \"files\": files\n        }\n\n        fetch('https://vysor.io/gist', {\n          method: 'POST',\n          body: JSON.stringify(gist)\n        })\n        .then(function(response) {\n          response.json().then(function(json) {\n            cb(json.html_url);\n          })\n        })\n      })\n    });\n  }\n\n})();\n\nexports.str2ab = str2ab;\nexports.ab2str = ab2str;\nexports.readString = readString;\nexports.readLine = readLine;\nexports.writeLine = writeLine;\nexports.writeString = writeString;\nexports.isNode = isNode;\nexports.isElectron = isElectron;\nexports.base64ToArrayBuffer = base64ToArrayBuffer;\nexports.nextTick = nextTick;\nexports.getAuthToken = getAuthToken;\nexports.make4Len16 = make4Len16;\nexports.throttleTimeout = throttleTimeout;\nexports.bufferToHex = bufferToHex;\nexports.hexToBuffer = hexToBuffer;\nexports.Success = Success;\nexports.readLenLoop = readLenLoop;\nexports.arrayBufferToBase64 = arrayBufferToBase64;\nexports.writeLenData = writeLenData;\nexports.makeUUID = makeUUID;\nexports.appendBuffer = appendBuffer;\nexports.readLenPackets = readLenPackets;\nexports.hex2b64 = hex2b64;\nexports.showNotification = showNotification;\nexports.getQueryVariable = getQueryVariable;\nexports.isBrowser = isBrowser;\nexports.copyTextToClipboard = copyTextToClipboard;","const {Socket, Server} = require('../lib/socket/socket');\nconst {nextTick, readString, str2ab, ab2str, make4Len16, appendBuffer, hex2b64, showNotification} = require('../lib/base/util');\nconst AdbChromeUsbTransport = require('./adb-chrome-usb');\nconst AdbWebUsbTransport = require('./adb-web-usb');\n\nlet getUserSelectedDevices;\nif (window.chrome && window.chrome.usb) {\n  getUserSelectedDevices = AdbChromeUsbTransport.getUserSelectedDevices;\n}\nelse {\n  getUserSelectedDevices = AdbWebUsbTransport.getUserSelectedDevices;\n}\n\nfunction AdbTcpTransport(socket) {\n  this.socket = socket;\n  this.zero_mask = (1 << 30) - 1;\n  this.type = 'tcp';\n  socket.onClose = function() {\n    var cb = this.currentRead;\n    if (cb) {\n      delete this.currentRead;\n      cb({\n        resultCode: -1\n      })\n    }\n  }.bind(this);\n}\n\nAdbTcpTransport.prototype.destroy = function() {\n  this.socket.destroy();\n}\n\nAdbTcpTransport.prototype.write = function(data, callback) {\n  if (this.writing) {\n    if (!this.pendingWrites)\n      this.pendingWrites = [];\n    this.pendingWrites.push({data: data, callback: callback});\n    return;\n  }\n\n  this.writing = true;\n  this.socket.write(data, function() {\n    this.writing = false;\n    callback({\n      resultCode: 0\n    })\n    if (!this.pendingWrites)\n      return;\n    var next = this.pendingWrites.shift();\n    if (!this.pendingWrites.length)\n      this.pendingWrites = null;\n    this.write(next.data, next.callback);\n  }.bind(this));\n}\n\nAdbTcpTransport.prototype.read = function(len, cb) {\n  this.currentRead = cb;\n  this.socket.read(len, function(data) {\n    delete this.currentRead;\n    cb({\n      resultCode: 0,\n      data: data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength)\n    })\n  });\n}\n\nfunction AdbDevice(transport, cb) {\n  this.onConnected = cb;\n  this.transport = transport;\n  this.currentSocketId = 0;\n  this.sockets = {};\n  this.forwards = {};\n  this.maxPayload = AdbDevice.MAX_PAYLOAD;\n}\n\nAdbDevice.prototype.fatal = function(e) {\n  console.log('fatal error', JSON.stringify(e));\n  var cb = this.onConnected;\n  if (cb) {\n    delete this.onConnected;\n    cb();\n  }\n  else if (this.onError) {\n    this.onError();\n    delete this.onError;\n  }\n  this.destroy();\n}\n\nAdbDevice.prototype.destroy = function() {\n  for (var socket in this.sockets) {\n    socket = this.sockets[socket];\n    socket.dataReceived(null);\n  }\n  if (this.forwards) {\n    $.each(this.forwards, function(port, listener) {\n      listener.destroy();\n    })\n  }\n  this.transport.destroy();\n}\n\nAdbDevice.kCommandSYNC = 0x434e5953,\nAdbDevice.kCommandCNXN = 0x4e584e43,\nAdbDevice.kCommandOPEN = 0x4e45504f,\nAdbDevice.kCommandOKAY = 0x59414b4f,\nAdbDevice.kCommandCLSE = 0x45534c43,\nAdbDevice.kCommandWRTE = 0x45545257,\nAdbDevice.kCommandAUTH = 0x48545541\n\nAdbDevice.kAuthToken = 1;\nAdbDevice.kAuthSignature = 2;\nAdbDevice.kAuthRSAPublicKey = 3;\n\n// ADB protocol version\nAdbDevice.ADB_PROTOCOL_VERSION = 0x01000000;\n// ADB Version\nAdbDevice.ADB_VERSION = 40;\nAdbDevice.MAX_PAYLOAD = 4096;\n\nAdbDevice.checksum = function(data) {\n  data = new Uint8Array(data);\n  var sum = 0;\n  for (var i = 0; i < data.byteLength; i++) {\n    sum += data[i];\n  }\n  return sum & 0xFFFFFFFF;\n}\n\nAdbDevice.prototype.sendMessage = function(command, arg0, arg1, payload, cb) {\n  // Header (24):\n  // command\n  // arg0\n  // arg1\n  // body length\n  // checksum\n  // command ^ 0xffffffff\n\n  if (!payload) {\n    payload = '';\n  }\n\n  if (payload.constructor.name == 'String') {\n    payload = str2ab(payload);\n  }\n\n  var appendZero = true;\n  if (!payload.byteLength) {\n    appendZero = false;\n  }\n  if (command == AdbDevice.kCommandAUTH && arg0 == AdbDevice.kAuthSignature) {\n    appendZero = false;\n  }\n  if (command == AdbDevice.kCommandWRTE) {\n    appendZero = false;\n  }\n\n  var bodyLength = payload.byteLength;\n  if (appendZero) {\n    bodyLength++;\n  }\n\n  if (appendZero) {\n    var copy = new ArrayBuffer(payload.byteLength + 1);\n    var view = new Uint8Array(copy);\n    view.set(new Uint8Array(payload));\n    view[copy.byteLength - 1] = 0;\n    payload = copy;\n  }\n\n  var header = new ArrayBuffer(24);\n  var view = new DataView(header);\n\n  view.setUint32(0, command, true);\n  view.setUint32(4, arg0, true);\n  view.setUint32(8, arg1, true);\n  view.setUint32(12, bodyLength, true);\n  view.setUint32(16, AdbDevice.checksum(payload), true);\n  view.setUint32(20, command ^ 0xFFFFFFFF, true);\n\n  // new Uint8Array(data, 24).set(new Uint8Array(payload));\n\n  this.transport.write(header, function(result) {\n    if (result.resultCode) {\n      this.fatal(result);\n    }\n    if (!payload.byteLength && cb) {\n      cb();\n    }\n  }.bind(this));\n\n  if (payload.byteLength) {\n    this.transport.write(payload, function(result) {\n      if (result.resultCode) {\n        this.fatal(result);\n      }\n      if (cb) {\n        cb();\n      }\n    }.bind(this));\n  }\n}\n\nAdbDevice.prototype.getKey = function(cb) {\n  if (!window.chrome || !window.chrome.storage) {\n    var key = new JSEncrypt({default_key_size: 2048});\n    try {\n      var keyString = localStorage.getItem('adbkey');\n      if (!keyString)\n        throw new Error();\n      var adbkey = JSON.parse(keyString);\n      key.setPrivateKey(adbkey);\n    }\n    catch (e) {\n      adbkey = key.getPrivateKeyB64();\n      key.setPrivateKey(adbkey);\n      localStorage.setItem('adbkey', JSON.stringify(adbkey));\n    }\n    nextTick(() => cb(key));\n    return;\n  }\n\n  chrome.storage.local.get('adbkey', function(result) {\n    var adbkey = result.adbkey;\n    var key = new JSEncrypt({default_key_size: 2048});\n    if (!adbkey) {\n      adbkey = key.getPrivateKeyB64();\n      key.setPrivateKey(adbkey);\n      chrome.storage.local.set({'adbkey': adbkey})\n    }\n    else {\n      key.setPrivateKey(adbkey);\n    }\n    cb(key);\n  })\n}\n\nAdbDevice.prototype._convertToMinCrypt = function(rsaKey) {\n  var bitLength = 2048;//rsaKey.n.toByteArray().length * 8;\n  var numWords = bitLength / 8 / 4;\n\n  // B32 = 1 << 32 or 0x100000000L\n  var B32 = BigInteger.ONE.shiftLeft(32);\n\n  // modulus\n  var N = rsaKey.n.clone();\n\n  // R=2^2048\n  var R = BigInteger.ONE.shiftLeft(1).pow(bitLength);\n\n  // RR = R^2 % N\n  var RR = R.multiply(R).mod(N);\n\n  // Format:\n  //   int32 len\n  //   uint32 n0inv\n  //   uint32 n[numWords]\n  //   uint32 rr[numWords]\n  //   int32 exponent\n  var pkey = new Uint32Array(3 + numWords * 2);\n  pkey[0] = numWords;\n  pkey[1] = B32.subtract(N.modInverse(B32)).intValue();\n\n  var iEnd = numWords + 2;\n  for (var i = 2, j = 2 + numWords; i < iEnd; ++i, ++j) {\n    pkey[i] = N.mod(B32).intValue();\n    N = N.divide(B32);\n    pkey[j] = RR.mod(B32).intValue();\n    RR = RR.divide(B32);\n  }\n\n  pkey[pkey.length - 1] = rsaKey.e;\n\n  // Convert to hex string first since our Base64 only does that\n  var hexStr = \"\";\n  var u8view = new Uint8Array(pkey.buffer);\n  for (var i = 0; i < u8view.length; ++i) {\n    var digit = u8view[i].toString(16);\n    if (digit.length == 1) {\n      hexStr += \"0\";\n    }\n    hexStr += digit;\n  }\n\n  // TODO: allow setting a useful identifier\n  return hex2b64(hexStr) + \" adb@chrome\";\n};\n\nAdbDevice.prototype.sign = function(rsakey, data) {\n  if (rsakey == null) {\n    throw \"AuthManager is not initialized\";\n  }\n\n  var totalLen = 2048 / 8;//rsakey.n.toByteArray() * 4;\n\n  var array = new Uint8Array(totalLen);\n  array[0] = 0x00;\n  array[1] = 0x01;\n\n  var ASN1_PREAMBLE = [0x00, 0x30, 0x21, 0x30, 0x09, 0x06, 0x05, 0x2B, 0x0E, 0x03, 0x02, 0x1A, 0x05, 0x00, 0x04, 0x14];\n\n  // Subtract the preamble and hash length.\n  var padEnd = totalLen - ASN1_PREAMBLE.length - data.byteLength;\n  for (var i = 2; i < padEnd; i++) {\n    array[i] = 0xFF;\n  }\n\n  array.set(new Uint8Array(ASN1_PREAMBLE), padEnd);\n  padEnd += ASN1_PREAMBLE.length;\n  array.set(new Uint8Array(data), padEnd);\n\n  var msg = new BigInteger(Array.apply([], array));\n  return new Uint8Array(rsakey.doPrivate(msg).toByteArray()).buffer;\n};\n\nfunction parseConnectionPayload(payload) {\n  var ret = {};\n  if (payload.constructor.name != 'String')\n    payload = ab2str(payload);\n  var splits = payload.replace('device::', '').split(';');\n  for (var split in splits) {\n    split = splits[split];\n    var parts = split.split('=');\n    if (parts.length == 2) {\n      ret[parts[0]] = parts[1];\n    }\n  }\n  return ret;\n}\n\nAdbDevice.parseConnectionPayload = parseConnectionPayload;\n\nAdbDevice.prototype.handleUnknown = function(localId, remoteId) {\n  console.log('no idea what this socket is.');\n  this.sendMessage(AdbDevice.kCommandCLSE, localId, remoteId);\n}\n\nAdbDevice.prototype.handleMessage = function(header, payload) {\n  var command = header.getUint32(0, true);\n  var arg0 = header.getUint32(4, true);\n  var arg1 = header.getUint32(8, true);\n\n  switch (command) {\n  case AdbDevice.kCommandOPEN:\n    if (this.onOpenSocket)\n      this.onOpenSocket(payload, arg0)\n    break;\n  case AdbDevice.kCommandAUTH:\n    console.log('auth:', this);\n    // get the key and respond\n    this.getKey(function(rsakey) {\n      if (this.sentSignature) {\n        var publicKey = this._convertToMinCrypt(rsakey.getKey());\n        this.sendMessage(AdbDevice.kCommandAUTH, AdbDevice.kAuthRSAPublicKey, 0, publicKey);\n        showNotification('Check your Android device and click \"Allow USB Debugging\".');\n      }\n      else {\n        this.sentSignature = true;\n        var signed = this.sign(rsakey.getKey(), payload);\n        this.sendMessage(AdbDevice.kCommandAUTH, AdbDevice.kAuthSignature, 0, signed, function() {\n          // console.log(arguments);\n        });\n      }\n    }.bind(this))\n    break;\n  case AdbDevice.kCommandOKAY:\n    var remoteId = arg0;\n    var localId = arg1;\n    var socket = this.sockets[localId];\n    if (!socket) {\n      this.handleUnknown(localId, remoteId);\n      return;\n    }\n    var cb = socket.onConnected;\n    if (cb) {\n      delete socket.onConnected;\n      socket.remoteId = remoteId;\n      cb(socket);\n    }\n\n    // see if we need to pump more data out\n    var data = socket.pendingWrite;\n    if (data) {\n      cb = socket.wrote;\n      delete socket.wrote;\n      delete socket.pendingWrite;\n      socket.write(data, cb);\n      return;\n    }\n\n    // this socket can write more...\n    cb = socket.wrote;\n    if (cb) {\n      delete socket.wrote;\n      cb();\n    }\n    break;\n  case AdbDevice.kCommandCNXN:\n    this.rawProperties = ab2str(payload);\n    this.properties = parseConnectionPayload(payload)\n    var cb = this.onConnected;\n    if (cb) {\n      delete this.onConnected;\n      cb(this);\n    }\n    break;\n  case AdbDevice.kCommandWRTE:\n    var remoteId = arg0;\n    var localId = arg1;\n    var socket = this.sockets[localId];\n    if (!socket) {\n      this.handleUnknown(localId, remoteId);\n      return;\n    }\n    // if not paused, ask for more\n    if (!socket.paused) {\n      this.sendMessage(AdbDevice.kCommandOKAY, socket.localId, socket.remoteId);\n    }\n    socket.dataReceived(new Uint8Array(payload));\n    break;\n  case AdbDevice.kCommandCLSE:\n    var remoteId = arg0;\n    var localId = arg1;\n    var socket = this.sockets[localId];\n    if (!socket) {\n      console.log('asked to close unknown socket?');\n      return;\n    }\n    delete this.sockets[localId];\n    socket.destroy();\n    // closed without connecting\n    var cb = socket.onConnected;\n    if (cb) {\n      delete socket.onConnected;\n      cb();\n    }\n    break;\n  default:\n    console.log('unknown command: ', command.toString(16), arg0, arg1, payload);\n    break;\n  }\n}\n\nAdbDevice.prototype.onReceiveMessage = function(result) {\n  if (result.resultCode) {\n    this.fatal(result);\n    return;\n  }\n\n  var header = new DataView(result.data);\n  var transferLen = header.getUint32(12, true);\n\n  if (!transferLen) {\n    try {\n      this.handleMessage(header, null);\n    }\n    finally {\n      this.receiveMessages();\n    }\n    return;\n  }\n\n  this.transport.read(transferLen, function(result) {\n    if (result.resultCode) {\n      this.fatal(result);\n      return;\n    }\n\n    var payload = result.data;\n    if (AdbDevice.checksum(payload) != header.getUint32(16, true)) {\n      this.receiveMessages();\n      return;\n    }\n\n    try {\n      this.handleMessage(header, payload);\n    }\n    finally {\n      this.receiveMessages();\n    }\n  }.bind(this))\n}\n\nAdbDevice.prototype.receiveMessages = function() {\n  this.transport.read(24, this.onReceiveMessage.bind(this));\n}\n\nAdbDevice.prototype.forwardPort = function(args) {\n  var forwardingServer = new Server();\n  forwardingServer.listen({\n    port: args.fromPort,\n    address: '127.0.0.1'\n  }, function(localSocket) {\n    this.newSocket(args.to, function(remoteSocket) {\n      if (remoteSocket)\n        Socket.stream(localSocket, remoteSocket);\n      else\n        localSocket.destroy();\n    }.bind(this))\n  }.bind(this), function() {\n    this.forwards[args.fromPort] = forwardingServer;\n  }.bind(this));\n}\n\nAdbDevice.prototype.newAdbSocket = function(socketId, cb) {\n  var socket;\n  if (this.createSocket)\n    socket = this.createSocket(socketId, cb);\n  else\n    socket = new AdbSocket(this, socketId, cb);\n  return socket\n}\n\nAdbDevice.prototype.newSocket = function(service, cb) {\n  var socketId = ++this.currentSocketId;\n  this.sockets[socketId] = this.newAdbSocket(socketId, cb);\n  this.sendMessage(AdbDevice.kCommandOPEN, socketId, 0, service);\n}\n\nfunction AdbSocket(device, socketId, cb) {\n  if (!cb) {\n    cb = function() {\n    }\n  }\n\n  this.device = device;\n  this.localId = socketId;\n  this.onConnected = cb;\n}\n\nAdbSocket.prototype.write = function(data, cb) {\n  if (this.pendingWrite || this.wrote) {\n    console.log('bad adb socket state, already writing');\n    throw new Error('bad adb socket state, already writing');\n  }\n\n  var toWrite = Math.min(this.device.transport.zero_mask, this.device.maxPayload);\n  if (toWrite < data.byteLength) {\n    this.pendingWrite = data.slice(toWrite);\n    data = data.slice(0, toWrite);\n  }\n  else {\n    this.pendingWrite = null;\n  }\n  this.wrote = cb;\n  this.device.sendMessage(AdbDevice.kCommandWRTE, this.localId, this.remoteId, data);\n}\n\nAdbSocket.prototype.destroy = function() {\n  this.device.sendMessage(AdbDevice.kCommandCLSE, this.localId, this.remoteId);\n  this.dataReceived(null);\n}\n\nAdbSocket.prototype.buffered = Socket.prototype.buffered;\nAdbSocket.prototype.dataReceived = Socket.prototype.dataReceived;\nAdbSocket.prototype.read = Socket.prototype.read;\nAdbSocket.prototype.pause = Socket.prototype.pause;\nAdbSocket.prototype.resume = Socket.prototype.resume;\nAdbSocket.prototype.unshift = Socket.prototype.unshift;\n\nAdbSocket.prototype.onPause = function() {\n  // no op\n}\n\nAdbSocket.prototype.onResume = function() {\n  // tell the other side we want data again\n  this.device.sendMessage(AdbDevice.kCommandOKAY, this.localId, this.remoteId);\n}\n\nfunction connectUsbAdb(device, iface, cb) {\n  console.log('connecting');\n  var adb = new AdbDevice(device.newTransport(iface), cb);\n  console.log('sending CNXN');\n  adb.sendMessage(AdbDevice.kCommandCNXN, AdbDevice.ADB_PROTOCOL_VERSION, AdbDevice.MAX_PAYLOAD, \"host::\");\n  console.log('starting receive loop');\n  adb.receiveMessages();\n}\n\nfunction AdbServer(options) {\n  var options = options || {};\n  var port = options.port || 5037;\n  var start = options.start !== false;\n\n  this.currentSocketId = 1;\n  this.pendingDevices = {};\n  this.port = port;\n  this.adbDevices = {};\n  this.clients = {};\n  if (start) {\n    this.start();\n  }\n}\n\nAdbServer.prototype.onOpenSocket = function(payload, remoteSocketId) {\n  var device = this;\n  var destination = ab2str(payload);\n  var split = destination.split(':');\n  var port = Number.parseInt(split[1]);\n  Socket.connect({host: '127.0.0.1', port: port}, function (socket) {\n    if (!socket) {\n      device.sendMessage(AdbDevice.kCommandOKAY, 0, remoteSocketId);\n      return;\n    }\n\n    var socketId = ++device.currentSocketId;\n    var adbSocket = device.newAdbSocket(socketId);\n    adbSocket.remoteId = remoteSocketId;\n    device.sockets[socketId] = adbSocket;\n    device.sendMessage(AdbDevice.kCommandOKAY, socketId, remoteSocketId);\n    Socket.stream(socket, adbSocket);\n  });\n}\n\nfunction _nowMs() {\n  return new Date().getTime();\n}\n\nAdbServer.prototype.start = function() {\n  if (this.server) {\n    console.log('ADB Server started while already started');\n    return;\n  }\n  this.clients = {};\n  this.adbDevices = {};\n  this.pendingDevices = {};\n  this.refreshing = {};\n  var server = new Server();\n  if (this.dummyListen)\n    return;\n  server.listen({\n    port: this.port,\n    address: '127.0.0.1'\n  }, function(socket) {\n    var client = new AdbClient(this, socket);\n    var socketId = ++this.currentSocketId;\n    this.clients[socketId] = client;\n    socket.onClose = function() {\n      delete this.clients[socketId];\n    }.bind(this);\n    client.receiveHeader();\n  }.bind(this),\n  function(result) {\n    if (result) {\n      console.log('adb server failed to listen: ' + result);\n      return;\n    }\n    console.log('ADB Server started');\n    this.server = server;\n  }.bind(this));\n}\n\nAdbServer.prototype.isRunning = function() {\n  return this.server != null;\n}\n\nAdbServer.prototype.kill = function() {\n  // kill listener\n  this.server.destroy();\n  this.server = null;\n  this.refreshing = {};\n  // kill clients\n  for (var client in this.clients) {\n    client = this.clients[client];\n    client.socket.destroy();\n  }\n  this.clients = {};\n  // kill clients\n  for (var device in this.adbDevices) {\n    device = this.adbDevices[device];\n    device.destroy();\n  }\n  this.adbDevices = {};\n  this.pendingDevices = {};\n}\n\nAdbServer.prototype.withAdbDevice = function(adb, cb) {\n  adb.onError = function() {\n    delete this.adbDevices[adb.serialno];\n    this.internalOnDevicesChanged();\n  }.bind(this);\n\n  var withSerial = function(str) {\n    adb.serialno = str.trim();\n    this.adbDevices[adb.serialno] = adb;\n    console.log('found device: ' + adb.serialno);\n    this.internalOnDevicesChanged();\n    cb(adb);\n  }.bind(this);\n\n  if (adb.serialno) {\n    withSerial(adb.serialno);\n    return;\n  }\n\n  adb.newSocket('shell:getprop ro.serialno', function(adbSocket) {\n    readString(adbSocket, function(str) {\n      withSerial(str);\n    }.bind(this))\n  }.bind(this))\n}\n\nAdbServer.prototype.tryDevice = function(device, cb) {\n  var serialno = device.serialno;\n  var pending = this.pendingDevices;\n  var server = this;\n\n  function tryInterface(i) {\n    console.log('trying intrface', i);\n    var number = i.interfaceNumber;\n\n    // check pending\n    if (pending[number]) {\n      return false;\n    }\n\n    pending[number] = device;\n\n    console.log('claiming:', JSON.stringify(i));\n    device.claimInterface(i.interfaceNumber)\n    .then(() => {\n      console.log('claimed interface');\n\n      connectUsbAdb(device, i, function(adb) {\n        console.log(\"usb adb connected\");\n        if (!adb) {\n          delete pending[number];\n          cb();\n          return;\n        }\n\n        adb.serialno = serialno;\n        adb.onOpenSocket = server.onOpenSocket;\n\n        server.withAdbDevice(adb, function(adb) {\n          delete pending[number];\n          cb(adb);\n        });\n      })\n    })\n    .catch(e => {\n      console.log('unable claim interface', JSON.stringify(e));\n    })\n    return true;\n  }\n\n  device.listInterfaces()\n  .then(interfaces => {\n    console.log('got interfaces', JSON.stringify(interfaces))\n    var usedHandle = false;\n    for (var i in interfaces) {\n      i = interfaces[i];\n\n      if (i.interfaceClass == 0xff && i.interfaceSubclass == 0x42 && i.interfaceProtocol == 0x1) {\n          usedHandle |= tryInterface(i);\n      }\n    }\n    if (!usedHandle) {\n      device.close();\n    }\n  })\n  .catch(e => {\n      console.log('unable list interfaces', e);\n      if (cb)\n        cb();\n  })\n}\n\n\nAdbServer.prototype.refreshDevice = function(device, cb) {\n  device.open()\n  .then(() => {\n    this.start();\n    console.log('opened ' + device.serialNumber);\n    this.tryDevice(device, (adb) => {\n      console.log('try device done', adb);\n      if (adb) {\n        adb.usbDevice = device.device;\n      }\n      cb(adb);\n    })\n  })\n  .catch(e => {\n    console.log('unable to open device', JSON.stringify(e));\n    cb()\n  });\n}\n\nAdbServer.prototype.internalOnDevicesChanged = function() {\n  for (var client in this.clients) {\n    client = this.clients[client];\n    if (!client.tracking)\n      continue;\n    var payload = client.getDevicesString();\n    if (!payload.length)\n      payload = '0000\\n'\n    client.socket.write(str2ab(payload), function() {})\n  }\n}\n\nAdbServer.prototype.stop = function() {\n  this.server.destroy();\n}\n\nfunction AdbClient(server, socket) {\n  this.server = server;\n  this.socket = socket;\n}\n\nAdbClient.prototype.resolveTransport = function(transport, serialno) {\n  if (serialno) {\n    var ret = this.server.adbDevices[serialno];\n    if (!ret)\n      return 'device not found';\n    return ret;\n  }\n  var num = Object.keys(this.server.adbDevices);\n  if (num > 1) {\n    return \"more than one device\";\n  }\n  if (num == 0) {\n    return 'no devices connected';\n  }\n  for (var device in this.server.adbDevices) {\n    return this.server.adbDevices[device];\n  }\n}\n\nAdbClient.prototype.write = function(data, status, cb) {\n  if (!status) {\n    status = 'OKAY';\n  }\n  // console.log(data);\n  data = str2ab(data);\n  var len = data.byteLength;\n  var len16 = make4Len16(len);\n  len16 = str2ab(status + len16);\n  var payload = appendBuffer(new Uint8Array(len16), new Uint8Array(data)).buffer;\n  if (!cb) {\n    cb = function() {\n      this.socket.destroy();\n    }.bind(this);\n  }\n  this.socket.write(payload, cb)\n}\n\nAdbClient.prototype.getDevicesString = function(options) {\n  var options = options || {};\n  var longformDevices = options.longformDevices;\n  var devices = '';\n  for (var device in this.server.adbDevices) {\n    device = this.server.adbDevices[device];\n    devices += device.serialno + '\\tdevice';\n    if (longformDevices) {\n      if (device.transport.type == 'usb')\n        devices += ' usb:' + device.transport.iface.interfaceNumber;\n      else\n        devices += ' tpcip:' + 'something';\n      devices += ' product:' + device.properties['ro.product.name'];\n      devices += ' model:' + device.properties['ro.product.model'];\n      devices += ' device:' + device.properties['ro.product.device'];\n    }\n    devices += '\\n';\n  }\n  return devices;\n}\n\nAdbClient.prototype.writeDevices = function(options, cb) {\n  this.write(this.getDevicesString(options), null, cb);\n}\n\nAdbClient.prototype.handlePayload = function(data) {\n  data = ab2str(data);\n  // console.log(\"handling command: \" + data);\n  var commandParts = data.split(':');\n  var hostCmd = data;\n  var serialno;\n  if (commandParts[0] == 'host-serial') {\n    commandParts[0] = 'host';\n    serialno = commandParts.splice(1, 1)[0];\n    if (Number.isInteger(parseInt(commandParts[1]))) {\n      // this is in host:port format\n      serialno += ':' + commandParts.splice(1, 1)[0];\n    }\n  }\n  if (commandParts.length >= 2)\n    hostCmd = commandParts[0] + ':' + commandParts[1];\n\n  switch (hostCmd) {\n  case 'host:version':\n    this.write(make4Len16(AdbDevice.ADB_VERSION));\n    break;\n  case 'host:devices-l':\n  case 'host:devices':\n    var longformDevices = data == 'host:devices-l';\n    this.writeDevices({ longformDevices: longformDevices });\n    break;\n  case 'host:features':\n    var transport = this.resolveTransport(data, serialno);\n    if (transport.constructor.name == 'String') {\n      this.write(transport, 'FAIL');\n      break;\n    }\n    var features = transport.properties.features;\n    if (!features)\n      features = '';\n    this.write(make4Len16(features));\n    break;\n  case 'host:transport-usb':\n  case 'host:transport-any':\n    var transport = this.resolveTransport(data, serialno);\n    if (transport.constructor.name == 'String') {\n      this.write(transport, 'FAIL');\n      break;\n    }\n    this.transport = transport;\n    this.socket.write(str2ab('OKAY'), function() {})\n    break;\n  case 'host:kill':\n    this.server.kill();\n    break;\n  case 'host:disconnect':\n    if (commandParts.length > 4) {\n      this.write('host:disconnect only takes 1 argument', 'FAIL');\n      break;\n    }\n    if (commandParts.length > 2) {\n      var remoteHost = commandParts[2];\n      if (remoteHost.length) {\n        var remotePort = 5555;\n        if (commandParts.length > 3)\n          remotePort = Number.parseInt(commandParts[3]);\n        var remote = remoteHost + ':' + remotePort;\n        var device = this.server.adbDevices[remote];\n        if (device && device.transport.type == 'tcp')\n          device.destroy();\n        this.write('disconnected');\n        break;\n      }\n    }\n    for (var device in this.server.adbDevices) {\n      device = this.server.adbDevices[device];\n      if (device.transport.type == 'tcp')\n        device.destroy();\n    }\n    this.write('disconnected');\n    break;\n  case 'host:connect':\n    if (commandParts.length < 3) {\n      this.write('need more arguments for connect <host>[:<port>]', 'FAIL');\n      break;\n    }\n    var remoteHost = commandParts[2];\n    var remotePort = 5555;\n    if (commandParts.length > 3)\n      remotePort = Number.parseInt(commandParts[3]);\n    Socket.connect({host: remoteHost, port: remotePort}, function(socket, e) {\n      if (!socket) {\n        console.error('connect failed');\n        this.write('unable to connect to ' + remoteHost + ' ' + remotePort + ': ' + e, 'FAIL');\n        return this;\n      }\n      var adb = new AdbDevice(new AdbTcpTransport(socket), function(adb) {\n        this.server.withAdbDevice(adb, function() {\n          var response = 'connected to ' + remoteHost + ':' + remotePort;\n          console.log(response);\n          this.write(response);\n        }.bind(this))\n      }.bind(this));\n      adb.onOpenSocket = this.onOpenSocket;\n      adb.serialno = remoteHost + ':' + remotePort;\n      socket.onClose = function() {\n        adb.fatal('socket closed');\n      }.bind(this);\n      adb.sendMessage(AdbDevice.kCommandCNXN, AdbDevice.ADB_PROTOCOL_VERSION, AdbDevice.MAX_PAYLOAD, \"host::\");\n      adb.receiveMessages();\n    }.bind(this))\n    break;\n  case 'host:track-devices':\n    this.tracking = _nowMs();\n    this.writeDevices({}, function() {});\n    break;\n  case  'host:forward':\n    // host:forward:tcp:5000;tcp:5000\n    var forwardParts = commandParts.join(':').substring(hostCmd.length + 1).split(';');\n    var from = forwardParts[0].split(':');\n    var fromPort = parseInt(from[1]);\n    var transport = this.resolveTransport(data, serialno);\n    if (transport.constructor.name == 'String') {\n      this.write(transport, 'FAIL');\n      break;\n    }\n    transport.forwardPort({\n      fromPort: fromPort,\n      to: forwardParts[1]\n    })\n    this.socket.write(str2ab('OKAYOKAY'), function() {\n      // this.socket.destroy();\n    }.bind(this));\n    break;\n  default:\n    // check to see if a smart socket is pending\n    if (this.transport) {\n      var transport = this.transport;\n      transport.newSocket(data, function(socket) {\n        if (!socket) {\n          this.socket.write(str2ab('OKAY'), function() {\n            this.socket.destroy();\n          }.bind(this))\n          return\n        }\n        this.socket.write(str2ab('OKAY'), function() {})\n        Socket.stream(socket, this.socket);\n      }.bind(this));\n      return;\n    }\n\n    // check if this was a smart socket request for a specific device\n    var specific = 'host:transport:';\n    if (data.startsWith(specific)) {\n      var serialno = data.substr(specific.length);\n      var device = this.server.adbDevices[serialno];\n      if (!device) {\n        this.write('device not found', 'FAIL');\n        return;\n      }\n      this.transport = device;\n      this.socket.write(str2ab('OKAY'), function() {})\n      break;\n    }\n\n    // WAT\n    console.log('unknown request: ' + data);\n    this.write('unknown command: ' + data, 'FAIL');\n\n    showNotification(appName + \"\\'s adb server encountered an unknown adb command.\\nYou may want to close \" + appName + \" and start your adb binary manually.\");\n    break;\n  }\n  this.receiveHeader();\n}\n\nAdbClient.prototype.receivePayload = function(data) {\n  var len = parseInt(ab2str(data), 16);\n  this.socket.read(len, this.handlePayload.bind(this));\n}\n\nAdbClient.prototype.receiveHeader = function() {\n  this.socket.read(4, this.receivePayload.bind(this));\n}\n\nexports.AdbDevice = AdbDevice;\nexports.AdbServer = AdbServer;\nexports.AdbTcpTransport = AdbTcpTransport;\nexports.getUserSelectedDevices = getUserSelectedDevices;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","const { Socket, Server } = require('../lib/socket/socket');\nconst { str2ab, ab2str, make4Len16, appendBuffer, hex2b64, showNotification } = require('../lib/base/util');\n\nclass ChromeUsbDevice {\n  constructor(device) {\n    this.device = device;\n  }\n\n  get vendorId() {\n    return this.device.vendorId;\n  }\n\n  get productId() {\n    return this.device.productId;\n  }\n\n  get serialNumber() {\n    return this.device.serialNumber;\n  }\n\n  claimInterface(interfaceNumber) {\n    return new Promise((resolve, reject) => {\n      chrome.usb.claimInterface(this.connectionHandle, interfaceNumber, () => {\n        var error = chrome.runtime.lastError;\n        if (error) {\n          reject(error);\n          return;\n        }\n        resolve();\n      });\n    });\n  }\n\n  listInterfaces() {\n    return new Promise((resolve, reject) => {\n      chrome.usb.listInterfaces(this.connectionHandle, interfaces => {\n        if (!interfaces) {\n          reject(chrome.runtime.lastError);\n          return;\n        }\n\n        resolve(interfaces);\n      });\n    });\n  }\n\n  open() {\n    return new Promise((resolve, reject) => {\n      chrome.usb.openDevice(this.device, connectionHandle => {\n        this.connectionHandle = connectionHandle;\n\n        if (!connectionHandle) {\n          reject(chrome.runtime.lastError)\n          return;\n        }\n\n        console.log('opened adb');\n        resolve();\n      })\n    })\n  }\n\n  close() {\n    chrome.usb.closeDevice(this.connectionHandle);\n  }\n\n  newTransport(iface) {\n    return new AdbUsbTransport(this.connectionHandle, iface);\n  }\n}\n\nfunction AdbUsbTransport (handle, iface) {\n    this.handle = handle;\n    this.iface = iface;\n    this.type = 'usb';\n    for (var endpoint in iface.endpoints) {\n        endpoint = iface.endpoints[endpoint];\n        if (endpoint.type == 'bulk') {\n            this.zero_mask = endpoint.maximumPacketSize - 1;\n            if (endpoint.direction == 'in') {\n                this.in = endpoint;\n            }\n            else {\n                this.out = endpoint;\n            }\n        }\n    }\n}\n\nAdbUsbTransport.prototype.destroy = function () {\n    chrome.usb.releaseInterface(this.handle, this.iface.interfaceNumber, function () {\n        chrome.runtime.lastError;\n        chrome.usb.closeDevice(this.handle, function () {\n            chrome.runtime.lastError;\n        })\n    }.bind(this))\n}\n\nAdbUsbTransport.prototype.write = function (data, callback) {\n    if (this.writing) {\n        if (!this.pendingWrites)\n            this.pendingWrites = [];\n        this.pendingWrites.push({ data: data, callback: callback });\n        return;\n    }\n\n    var transfer = {\n        direction: \"out\",\n        endpoint: this.out.address,\n        data: data\n    }\n\n    this.writing = true;\n    chrome.usb.bulkTransfer(this.handle, transfer, function (result) {\n        chrome.runtime.lastError;\n        this.writing = false;\n        callback(result);\n        if (!this.pendingWrites)\n            return;\n        var next = this.pendingWrites.shift();\n        if (!this.pendingWrites.length)\n            this.pendingWrites = null;\n        this.write(next.data, next.callback);\n    }.bind(this));\n}\n\nAdbUsbTransport.prototype.read = function (len, cb) {\n    var transfer = {\n        direction: \"in\",\n        endpoint: this.in.address,\n        length: len\n    }\n    chrome.usb.bulkTransfer(this.handle, transfer, function (result) {\n        chrome.runtime.lastError;\n        cb(result);\n    });\n}\n\nfunction getUserSelectedDevices() {\n  return new Promise((resolve, reject) => {\n    chrome.usb.getUserSelectedDevices({\n      filters: [\n        {\n        interfaceClass: 0xff,\n        interfaceSubclass: 0x42,\n        interfaceProtocol: 0x1,\n        }\n      ]\n    }, function(devices) {\n      resolve(devices.map(device => new ChromeUsbDevice(device)));\n    });\n  })\n}\n\nexports.getUserSelectedDevices = getUserSelectedDevices;\n","async function getUserSelectedDevices () {\n  let device = await navigator.usb.requestDevice({\n    filters: [{\n      classCode: 0xff,\n      subclassCode: 0x42,\n      protocolCode: 0x1,\n    }]\n  })\n  return [new WebUsbDevice(device)]\n}\n\nclass WebUsbDevice {\n  constructor(device) {\n    this.device = device;\n  }\n\n  get vendorId () {\n    return this.device.vendorId;\n  }\n\n  get productId () {\n    return this.device.productId;\n  }\n\n  get serialNumber () {\n    return this.device.serialNumber;\n  }\n\n  async open () {\n    await this.device.open()\n  }\n\n  async close () {\n    await this.device.close();\n  }\n\n  async claimInterface (interfaceNumber) {\n    return await this.device.claimInterface(interfaceNumber);\n  }\n\n  async listInterfaces () {\n    if (this.device.configuration === null)\n      await this.device.selectConfiguration(1);\n    return this.device.configuration.interfaces.map(iface => {\n      let alternate = iface.alternate || iface.alternates[0];\n      let { interfaceClass,\n        interfaceName,\n        interfaceProtocol,\n        interfaceSubclass,\n        endpoints } = alternate;\n      return {\n        interfaceNumber: iface.interfaceNumber,\n        interfaceClass, interfaceName, interfaceProtocol, interfaceSubclass, endpoints,\n      }\n    });\n  }\n\n  newTransport (iface) {\n    return new AdbUsbTransport(this.device, iface);\n  }\n}\n\nclass AdbUsbTransport {\n  constructor(device, iface) {\n    this.device = device;\n    this.iface = iface;\n\n    for (var endpoint of iface.endpoints) {\n      if (endpoint.type == 'bulk') {\n        this.zero_mask = endpoint.packetSize - 1;\n        if (endpoint.direction == 'in') {\n          this.in = endpoint;\n        }\n        else {\n          this.out = endpoint;\n        }\n      }\n    }\n  }\n\n  destroy () {\n    this.device.releaseInterface(iface.interfaceNumber);\n  }\n\n  async write (data, callback) {\n    if (this.writing) {\n      if (!this.pendingWrites)\n        this.pendingWrites = [];\n      this.pendingWrites.push({ data: data, callback: callback });\n      return;\n    }\n\n    this.writing = true;\n    var result\n    try {\n      result = await this.device.transferOut(this.out.endpointNumber, data);\n    }\n    catch (e) {\n      result = {\n        resultCode: e,\n      }\n    }\n    finally {\n      this.writing = false;\n    }\n    callback(result);\n\n    if (!this.pendingWrites)\n      return;\n    var next = this.pendingWrites.shift();\n    if (!this.pendingWrites.length)\n      this.pendingWrites = null;\n    this.write(next.data, next.callback);\n  }\n\n  async read (len, cb) {\n    var result\n    try {\n      result = await this.device.transferIn(this.in.endpointNumber, len);\n      result = {\n        data: result.data.buffer,\n      }\n    }\n    catch (e) {\n      result = {\n        resultCode: e,\n      }\n    }\n\n    cb(result);\n  }\n}\n\nexports.getUserSelectedDevices = getUserSelectedDevices;\n","var Buffer = require('buffer').Buffer;\n\nvar hasChromeSockets = false;\ntry {\n  if (chrome && chrome.sockets) {\n    chrome.sockets.tcp.onReceive.addListener(function(resultData) {\n      var socket = Socket.readers[resultData.socketId];\n      // could be owned by another process or something...\n      if (socket == null)\n        return;\n      // console.log('got data: ' + ab2str(resultData.data));\n      socket.dataReceived(new Uint8Array(resultData.data));\n    });\n    chrome.sockets.tcp.onReceiveError.addListener(function(resultData) {\n      var socket = Socket.readers[resultData.socketId];\n      // console.log('socket died');\n      // could be owned by another process or something...\n      if (socket == null)\n        return;\n      socket.destroy();\n      socket.dataReceived(null);\n    });\n  \n    chrome.sockets.tcpServer.onAccept.addListener(function(acceptInfo) {\n      chrome.sockets.tcp.setPaused(acceptInfo.clientSocketId, false);\n      var listener = Server.listeners[acceptInfo.socketId];\n      if (listener == null)\n        return;\n      listener(new Socket({socketId: acceptInfo.clientSocketId}));\n    });\n\n    hasChromeSockets = true;\n  }\n}\ncatch (ignored) {\n  console.log('chrome app socket initialization failed')\n  console.warn(ignored);\n}\n\n\nfunction Socket(options, cb) {\n  if (options.socketId) {\n    this.socketId = options.socketId;\n    Socket.readers[this.socketId] = this;\n  }\n  else if (hasChromeSockets) {\n    chrome.sockets.tcp.create(function(createInfo) {\n      this.socketId = createInfo.socketId;\n      chrome.sockets.tcp.connect(this.socketId, options.host, options.port, function(result) {\n        if (!result) {\n          Socket.readers[createInfo.socketId] = this;\n          cb(this);\n        }\n        else {\n          // must read this to prevent log spam\n          chrome.runtime.lastError;\n          this.destroy();\n          cb(null);\n        }\n      }.bind(this));\n    }.bind(this));\n  }\n  else {\n    // electron\n    var connected;\n    if (!options.ns) {\n      this.ns = new __non_webpack_require__('net').Socket();\n      this.ns.connect({\n        port: options.port,\n        host: options.host,\n      }, function() {\n        connected = true;\n        cb(this);\n      }.bind(this))\n    }\n    else {\n      this.ns = options.ns\n      connected = true;\n    }\n    this.ns.on('close', function() {\n      this.destroy();\n      if (!connected)\n        cb(null);\n    }.bind(this))\n    this.ns.on('data', function(d) {\n      this.dataReceived(d);\n    }.bind(this));\n  }\n}\nSocket.readers = {};\n\n\nSocket.connect = function(options, cb) {\n  return new Socket(options, cb);\n}\n\nSocket.pump = function(s1, s2, cb) {\n  if (!s1 || !s2) {\n    console.error('Socket.pump called with null socket', s1, s2);\n    cb();\n    return;\n  }\n\n  var writeDone = function() {\n    s1.read(reader);\n  }.bind(s1);\n  var reader = function(data) {\n    var buffer = data.buffer;\n    if (data.byteOffset || data.length != buffer.byteLength) {\n      buffer = buffer.slice(data.byteOffset, data.byteOffset + data.length);\n    }\n    s2.write(buffer, writeDone);\n  }.bind(s2);\n  s1.read(reader);\n  s1.onClose = cb;\n}\n\nSocket.stream = function(s1, s2, cb) {\n  Socket.pump(s1, s2, function() {\n    if (s2)\n      s2.destroy();\n    if (cb) {\n      var tmp = cb;\n      cb = null;\n      tmp();\n    }\n  });\n  Socket.pump(s2, s1, function() {\n    if (s1)\n      s1.destroy();\n    if (cb) {\n      var tmp = cb;\n      cb = null;\n      tmp();\n    }\n  });\n}\n\nSocket.eat = function(s) {\n  function reader() {\n    s.read(reader);\n  }\n  reader();\n}\n\nSocket.prototype.read = function() {\n  if (this.pendingCallback) {\n    throw new Error(\"double callback\");\n  }\n\n  // see if we need to alert a close event\n  if (this.closed && !this.pending) {\n    var cb = this.onClose;\n    if (cb) {\n      delete this.onClose;\n      cb();\n    }\n    return;\n  }\n\n  var argc = 0;\n  if (arguments[argc].constructor.name == 'Number') {\n    this.pendingLength = arguments[argc++];\n  }\n  else {\n    this.pendingLength = 0;\n  }\n  var cb = arguments[argc];\n\n  // see if we can fulfill this request\n  if (!this.pending || this.paused) {\n    // nope\n    this.pendingCallback = cb;\n    return;\n  }\n\n  if (!this.pendingLength) {\n    // take it all!\n    this.pendingLength = this.buffered();\n  }\n  else if (this.pendingLength > this.buffered()) {\n    this.pendingCallback = cb;\n    return;\n  }\n\n  var data;\n  var totalRead = 0;\n  while (totalRead < this.pendingLength) {\n    var buf = this.pending.shift();\n    this.bufferedLength -= buf.length;\n    // allow gc\n    if (!this.pending.length)\n      delete this.pending;\n    var add = buf;\n    var need = Math.min(add.byteLength, this.pendingLength - totalRead);\n    if (need != add.byteLength) {\n      var part = add.subarray(0, need);\n      var leftover = add.subarray(need);\n      this.unshift(leftover);\n      add = part.slice();\n    }\n    if (!data && add.byteLength != this.pendingLength)\n      data = new Uint8Array(this.pendingLength);\n    if (data) {\n      // append\n      data.set(add, totalRead);\n    }\n    else {\n      // this is exactly what we need, so just use this\n      data = add;\n    }\n    totalRead += add.byteLength;\n  }\n  cb(data);\n}\n\nSocket.prototype.write = function(data, cb) {\n  // console.log('writeing: ' + ab2str(data));\n  if (this.pendingWrite) {\n    if (this.bufferWrites) {\n      if (cb != null)\n        console.error('using callbacks in buffered mode?');\n      var originalCallback = this.pendingWrite;\n      this.pendingWrite = function() {\n        if (originalCallback)\n          originalCallback();\n        this.write(data, cb);\n      }.bind(this);\n    }\n    else {\n      console.error('write is already in progress!')\n    }\n  }\n  if (cb == null) {\n    if (!this.bufferWrites)\n      console.error('write callback is null?');\n    cb = function() {}\n  }\n  this.pendingWrite = cb;\n  if (hasChromeSockets) {\n    chrome.sockets.tcp.send(this.socketId, data, function(writeInfo) {\n      // must read this to prevent log spam\n      chrome.runtime.lastError;\n\n      if (!writeInfo || writeInfo.resultCode) {\n        // how to handle this?\n        delete this.pendingWrite;\n        return;\n      }\n      if (writeInfo.bytesSent < data.byteLength) {\n        this.write(data.slice(writeInfo.bytesSent), cb);\n      }\n      else {\n        delete this.pendingWrite;\n        cb();\n      }\n    }.bind(this));\n  }\n  else {\n    if (!this.ns)\n      return;\n    if (!data.byteLength) {\n      process.nextTick(function() {\n        delete this.pendingWrite;\n        cb();\n      }.bind(this));\n      return;\n    }\n    this.ns.write(Buffer.from(data), function() {\n      delete this.pendingWrite;\n      cb();\n    }.bind(this));\n  }\n}\n\nSocket.prototype.destroy = function(data, cb) {\n  if (hasChromeSockets) {\n    chrome.sockets.tcp.close(this.socketId, function() {\n      // must read this to prevent log spam\n      chrome.runtime.lastError;\n    });\n  }\n  else {\n    this.dataReceived(null);\n    if (this.ns) {\n      this.ns.destroy();\n      delete this.ns;\n    }\n  }\n}\n\nSocket.prototype.unshift = function(buffer) {\n  if (buffer.byteLength == 0)\n    return;\n  if (!this.pending)\n    this.pending = [buffer];\n  else\n    this.pending.unshift(buffer);\n  if (!this.bufferedLength)\n    this.bufferedLength = 0;\n  this.bufferedLength += buffer.length;\n}\n\nSocket.prototype.dataReceived = function(payload) {\n  if (payload) {\n    if (payload.asUint8Array)\n      payload = payload.asUint8Array();\n    if (payload.constructor == ArrayBuffer)\n      payload = new Uint8Array(payload);\n  }\n  // payload is a Uint8Array\n  // push any data we got into our queue\n  if (payload && payload.length) {\n    var arr = new Uint8Array(payload);\n    if (!this.pending)\n      this.pending = [arr]\n    else\n      this.pending.push(arr);\n  }\n  if (payload == null) {\n    this.closed = true;\n  }\n  else {\n    if (!this.bufferedLength)\n      this.bufferedLength = 0;\n    this.bufferedLength += payload.length;\n  }\n  // don't trigger callbacks if there's no data or if paused\n  if (this.paused || !this.pending || !this.pending.length) {\n    // if this socket died, let's alert.\n    var cb = this.onClose;\n    if (this.closed && cb) {\n      delete this.onClose;\n      cb();\n    }\n    return;\n  }\n  // alert the data callback\n  var pl = this.pendingLength;\n  var cb = this.pendingCallback;\n  if (cb) {\n    delete this.pendingCallback;\n    this.read(pl, cb);\n  }\n}\n\nSocket.prototype.buffered = function() {\n  // var ret = 0;\n  // if (this.pending) {\n  //   for (var buf in this.pending) {\n  //     buf = this.pending[buf];\n  //     ret += buf.byteLength;\n  //   }\n  // }\n  //\n  // if (ret != this.bufferedLength)\n  //   console.log('buffer length mismatch');\n\n  return this.bufferedLength;\n}\n\nSocket.prototype.pause = function() {\n  if (this.paused) {\n    return;\n  }\n  this.paused = true;\n  this.onPause();\n}\n\nSocket.prototype.resume = function() {\n  if (!this.paused) {\n    return;\n  }\n  this.paused = false;\n  this.onResume();\n}\n\nSocket.prototype.onResume = function() {\n  chrome.sockets.tcp.setPaused(this.socketId, false, function() {})\n}\n\nSocket.prototype.onPause = function() {\n  chrome.sockets.tcp.setPaused(this.socketId, true, function() {})\n}\n\n\n\nfunction Server() {\n}\nServer.listeners = {};\n\nServer.prototype.__proto__ = Socket.prototype;\n\nServer.prototype.destroy = function() {\n  if (hasChromeSockets) {\n    chrome.sockets.tcpServer.close(this.socketId, function() {\n      chrome.runtime.lastError;\n    });\n  }\n  else {\n    if (this.ns) {\n      this.ns.close();\n      delete this.ns;\n    }\n  }\n}\n\nServer.prototype.listen = function(args, cb, listening) {\n  var port;\n  var address;\n  if (args.constructor.name == 'Number') {\n    port = args;\n    address = '0.0.0.0';\n  }\n  else {\n    address = args.address;\n    port = args.port;\n  }\n  if (hasChromeSockets) {\n    chrome.sockets.tcpServer.create(function(createInfo) {\n      this.socketId = createInfo.socketId;\n      Server.listeners[this.socketId] = cb;\n      chrome.sockets.tcpServer.listen(createInfo.socketId, address, port, function(result) {\n        // must read this to prevent log spam\n        chrome.runtime.lastError;\n        if (result) {\n          this.destroy();\n          if (listening) {\n            listening(result);\n          }\n          return;\n        }\n        chrome.sockets.tcpServer.getInfo(this.socketId, function(info) {\n          this.localAddress = info.localAddress;\n          this.localPort = info.localPort;\n\n          if (listening) {\n            listening(result);\n          }\n        }.bind(this));\n      }.bind(this))\n    }.bind(this))\n  }\n  else {\n    this.ns = __non_webpack_require__('net').createServer(function(s) {\n      cb(new Socket({ns: s}))\n    }.bind(this));\n    this.ns.on('close', function() {\n      this.destroy();\n    }.bind(this))\n    this.ns.on('error', function(e) {\n      if (listening)\n        listening(e);\n    }.bind(this))\n    this.ns.on('listening', function() {\n      var info = this.ns.address();\n      this.localAddress = info.address;\n      this.localPort = info.port;\n\n      if (listening)\n        listening();\n    }.bind(this))\n    this.ns.listen({\n      port: port,\n      host: address,\n    })\n  }\n}\n\nexports.Socket = Socket;\nexports.Server = Server;\n","function showModal(opts) {\n  var modal = $('#notificationModal');\n  var ok = modal.find('#modal-ok');\n  var cancel = modal.find('#modal-cancel');\n\n  ok.unbind('click');\n  cancel.unbind('click');\n  modal.unbind('hidden.bs.modal');\n\n  opts.cancelButton = opts.cancelButton || 'Cancel';\n  opts.okButton = opts.okButton || 'OK';\n  opts.title = opts.title || chrome.runtime.getManifest().name;\n  opts.body = opts.body || '';\n\n  if (opts.hideCancel)\n    cancel.hide();\n  else\n    cancel.show();\n\n  ok.text(opts.okButton);\n  cancel.text(opts.cancelButton);\n  modal.find('#modal-title').text(opts.title);\n  modal.find('#modal-body').html(opts.body);\n\n  var clickedOk;\n  ok.click(function() {\n    clickedOk = true;\n    if (!opts.ok || !opts.ok())\n      $('#notificationModal').modal('hide');\n  });\n\n  if (opts.cancel) {\n    modal.on('hidden.bs.modal', function() {\n      if (!clickedOk)\n        opts.cancel();\n    })\n    cancel.click(opts.cancel);\n  }\n\n  $('#notificationModal').modal();\n\n  if (opts.duration) {\n    setTimeout(function() {\n      $('#notificationModal').modal('hide');\n    }, opts.duration)\n  }\n}\n\nfunction shortModal(title, body) {\n  showModal({\n    title: title,\n    body: body,\n    duration: 8000,\n    hideCancel: true\n  })\n}\n\nexports.showModal = showModal;\nexports.shortModal = shortModal;\n","function getDefaultDeviceSettings() {\n  var defaults = {\n    showSoftKeys: true,\n    pinTitleBar: true,\n    alwaysOnTop: false,\n    bitrate: 0,\n    resolution: 0,\n    decoder: 0,\n    displaySettings: commonDisplaySettings[0],\n    dimDisplay: false,\n  };\n  return defaults;\n}\n\nfunction sanitizeDeviceSettings(deviceSettings) {\n  if (!deviceSettings)\n    return null;\n  if (deviceSettings.friendlyName && !deviceSettings.friendlyName.length)\n    delete deviceSettings.friendlyName;\n  return deviceSettings;\n}\n\nfunction loadAllDeviceSettings(cb) {\n  if (window.chrome && window.chrome.storage) {\n    chrome.storage.local.get('device-settings', function(vals) {\n      cb(vals['device-settings'] || {});\n    });\n  }\n  else {\n    cb({});\n  }\n}\n\nfunction loadDeviceSettings(serialno, cb) {\n  if (!serialno)\n    serialno = 'web';\n  var defaults = getDefaultDeviceSettings();\n  if (serialno == 'inkwire') {\n    defaults.pinTitleBar = false;\n    defaults.showSoftKeys = false;\n  }\n  loadAllDeviceSettings(function(vals) {\n    cb(sanitizeDeviceSettings(vals[serialno] || defaults));\n  });\n}\n\nfunction saveDeviceSettings(serialno, deviceSettings, cb) {\n  sanitizeDeviceSettings(deviceSettings);\n  if (!window.chrome || !window.chrome.storage) {\n    if (cb)\n      cb();\n    return;\n  }\n\n  if (!serialno || serialno.indexOf('127.0.0.1') != -1) {\n    if (cb)\n      cb();\n    return;\n  }\n\n  loadAllDeviceSettings(function(vals) {\n    vals[serialno] = deviceSettings;\n    chrome.storage.local.set({\n      'device-settings': vals\n    }, cb);\n  })\n}\n\nfunction populateDisplaySettings() {\n  for (var i in commonDisplaySettings) {\n    var m = commonDisplaySettings[i];\n    var o = new Option();\n    $(o).html(m.name);\n    $(\"#display-settings\").append(o);\n  }\n}\n\nfunction applyDeviceSettings(deviceSettings) {\n  // must be || null cause undefined doesn't trigger a change\n  $('#new-display-name').prop('value', deviceSettings.friendlyName || null);\n  $(\"#softkeys-check\").prop('checked', deviceSettings.showSoftKeys ? true : false).change();\n  $(\"#pin-title-check\").prop('checked', deviceSettings.pinTitleBar ? true : false).change();\n  $(\"#always-on-top-check\").prop('checked', deviceSettings.alwaysOnTop ? true : false).change();\n  $(\"#bitrate\").prop('selectedIndex', deviceSettings.bitrate || 0);\n  $(\"#decoder\").prop('selectedIndex', deviceSettings.decoder || 0);\n  $(\"#resolution\").prop('selectedIndex', deviceSettings.resolution || 0);\n\n  var dname = deviceSettings.displaySettings && deviceSettings.displaySettings.name;\n  var matched = 0;\n  for (var i in commonDisplaySettings) {\n    var m = commonDisplaySettings[i];\n    if (m.name == dname) {\n      matched = i;\n      break;\n    }\n  }\n\n  $(\"#display-settings\").prop('selectedIndex', matched);\n  $(\"#dim-display\").prop('checked', deviceSettings.dimDisplay ? true : false);\n  $(\"#auto-audio\").prop('checked', deviceSettings.autoAudio ? true : false);\n}\n\nvar commonDisplaySettings = [\n  {\n    name: 'Default Settings',\n    size: 'reset',\n    density: 'reset',\n  },\n  {\n    name: 'Resizable (96dpi)',\n    size: 'reset',\n    density: '96',\n    freeSize: true,\n  },\n  {\n    name: 'Resizable (144dpi)',\n    size: 'reset',\n    density: '144',\n    freeSize: true,\n  },\n  {\n    name: '1080p (96dpi)',\n    size: '1920x1080',\n    density: '96',\n  },\n  {\n    name: '4K (144dpi)',\n    size: '3840x2160',\n    density: '144',\n  },\n  {\n    name: 'Galaxy Nexus',\n    size: '720x1280',\n    density: '320',\n  },\n  {\n    name: 'Nexus 4',\n    size: '768x1280',\n    density: '320',\n  },\n  {\n    name: 'Nexus 5',\n    size: '1080x1920',\n    density: '480',\n  },\n  {\n    name: 'Nexus 6',\n    size: '1440x2560',\n    density: '560',\n  },\n  {\n    name: 'Nexus 6p',\n    size: '1440x2560',\n    density: '560',\n  },\n  {\n    name: 'Nexus 7 (2012)',\n    size: '800x1280',\n    density: '213',\n  },\n  {\n    name: 'Nexus 7 (2013)',\n    size: '1200x1920',\n    density: '320',\n  },\n  {\n    name: 'Nexus 9',\n    size: '1536x2048',\n    density: '320',\n  },\n]\n\nexports.populateDisplaySettings = populateDisplaySettings;\nexports.loadDeviceSettings = loadDeviceSettings;\nexports.applyDeviceSettings = applyDeviceSettings;\nexports.saveDeviceSettings = saveDeviceSettings;","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","const {copyTextToClipboard, isElectron, getAuthToken} = require('koush-utils/lib/base/util');\nconst {showModal, shortModal} = require('./modal');\nconst {populateDisplaySettings, loadDeviceSettings, applyDeviceSettings} = require('./device-settings');\nconst {getUserSelectedDevices} = require('koush-utils/adb/adb');\nconst {getVysorWhitelistStatus} = require('./farm-access');\n\nfunction selectDevices() {\n  getUserSelectedDevices()\n  .then(devices => {\n    $.each(devices, function(key, device) {\n      var vidpid = device.vendorId.toString(16) + ':' + device.productId.toString(16);\n      tracker.sendEvent('select-device', vidpid);\n\n      adbServer.refreshDevice(device, function(adb) {\n        if (adb) {\n          tracker.sendEvent('connect-device', adb.properties['ro.product.name'], device.vendorId.toString(16) + ':' + device.productId.toString(16), vidpid);\n        }\n        else {\n          var appName = chrome.runtime.getManifest().name;\n          chrome.notifications.create(\"reload\", {\n            type: \"basic\",\n            iconUrl: \"/icon.png\",\n            title: appName,\n            message: \"An error occurred while connecting to the Android device. Restarting the Vysor app, or disconnecting and reconnecting the Android may resolve this issue.\",\n            buttons: [\n              {\n                title: \"Reload\"\n              }\n            ]\n          });\n        }\n      });\n    })\n  });\n}\n\nfunction refreshLoginState() {\n  getAuthToken(false, function(token) {\n    if (token) {\n      $('#login-container').hide();\n      chrome.identity.getProfileUserInfo(function(data) {\n        if (!data)\n          return;\n        $('#login-info').show();\n        $('#login-email').text(data.email)\n        $('#account-management').unbind('click');\n        if (!_lm._md || !_lm._md.managementUrl) {\n          $('#account-management').text('Retrieve License.');\n          $('#account-management-info').text('Unlicensed. Already purchased?');\n          $('#account-management').click(function() {\n            _lm.refresh(function(result) {\n              if (!result) {\n                showModal({\n                  hideCancel: true,\n                  body: 'No license found for account ' + data.email + '. If this message was in error, please click Support for more help.<br/><br/>Wrong account? <a href=\"https://support.vysor.io/support/licensing/multiple/\" target=\"_blank\">Read this</a>.'\n                })\n              }\n            }, true);\n          })\n          return;\n        }\n        $('#account-management-info').text('');\n        $('#account-management').show();\n        $('#account-management').text(_lm._md.managementText);\n        $('#account-management').attr('href', _lm._md.managementUrl);\n      });\n    }\n    else {\n      $('#login-container').show();\n    }\n  })\n}\n\nchrome.identity.onSignInChanged.addListener(function() {\n  refreshLoginState();\n});\n\nfunction refreshListWithLicense() {\n  refreshLoginState();\n  if (!_lm._il)\n    return;\n  $('#purchase').hide();\n  $('#vysor-version').text('Vysor Pro Version ' + chrome.runtime.getManifest().version)\n  $('.navbar-brand').text('Vysor Pro')\n}\nsharedGlobals._rl = refreshListWithLicense;\n\n$(document).ready(function() {\n  if (navigator.platform.toLowerCase().indexOf('win') == -1) {\n    $('#windows').hide();\n  }\n\n  $(\"#vysor-keyboard-check\").change(function() {\n    chrome.storage.local.set({\n      keyboard: this.checked\n    })\n    updateKeyboard(this.checked);\n  });\n\n  chrome.storage.local.get('keyboard', function(d) {\n    $('#vysor-keyboard-check').prop('checked', d.keyboard);\n  });\n\n\n  $('#customize-vysor').click(libind('Customize Vysor', function() {\n    chrome.app.window.create('customize.html', {\n      id: 'customize',\n      innerBounds: {\n        width: 768,\n        height: 512,\n        minWidth: 768,\n        minHeight: 512\n      }\n    }, function(w) {\n      w.onClosed.addListener(function() {\n      })\n    });\n  }));\n\n  $('#bugreport').click(function() {\n    var cancel;\n    showModal({\n      title: 'Bug Report',\n      body: 'Creating bug report. Please wait...',\n      okButton: 'Cancel',\n      hideCancel: true,\n      ok: function() {\n        cancel = true;\n      }\n    })\n\n    gistConsoleLog({\n      'adb-devices.json': {\n        content: JSON.stringify(lastAdbDevices, null, 2)\n      }\n    },\n      function(url) {\n      function me() {\n        showModal({\n          cancelButton: 'OK',\n          okButton: 'Copy Bug Report',\n          ok: function() {\n            $('#notificationModal').modal('hide');\n            copyTextToClipboard(url);\n            setTimeout(me, 500);\n          },\n          title: 'Bug Report',\n          body: 'Here is the <a href=\"' + url + '\" target=\"_blank\">link to your bug report</a>.<br/>Please copy the bug report link and email <a href=\"mailto:support@clockworkmod.com\" target=\"_blank\">support@clockworkmod.com</a> with a description of your issue.',\n        })\n      }\n      me();\n    })\n  })\n\n  $('#logging-in').hide();\n  $('#login-info').hide();\n  $('#login-container').hide();\n  $('#connect-android').click(selectDevices);\n  $('#vysor-version').text('Vysor Version ' + chrome.runtime.getManifest().version)\n  $('#reload-vysor').click(function() {\n    chrome.runtime.reload();\n  })\n  if (isElectron()) {\n    $('#desktop-app').hide();\n\n    $('#reset-vysor').click(function() {\n      showModal({\n        title: 'Reset Vysor',\n        body: 'Resetting Vysor will log out the current user and clear all Vysor settings.',\n        okButton: 'Reset',\n        ok: function() {\n          chrome.runtime.reset();\n        }\n      })\n    });\n  }\n  else {\n    $('#reset-vysor').hide();\n  }\n\n  $(\"#share-all-check\").change(function() {\n    chrome.storage.local.remove('lastDeviceFarmRegistrationId');\n    chrome.storage.local.set({\n      'share-all-devices': this.checked\n    })\n\n    if (this.checked) {\n      startDeviceFarm(true, function(vysorShareServerUrl, err) {\n        if (err) {\n          shortModal(\"Vysor Share Server\", err);\n          $(\"#share-all-check\").prop('checked', false);\n          return;\n        }\n\n        updateVysorShareServer(vysorShareServerUrl);\n        var appName = chrome.runtime.getManifest().name;\n        shortModal(\"Copied \" + appName + \" Share Server URL to clipboard.\", vysorShareServerUrl)\n        copyTextToClipboard(vysorShareServerUrl);\n      });\n    }\n    else {\n      stopDeviceFarm();\n    }\n  });\n\n  chrome.storage.local.get('connect-automatically', function(vals) {\n    var connectAuto;\n    if (vals['connect-automatically'] === false)\n      connectAuto = 2;\n    else if (vals['connect-automatically'] === true)\n      connectAuto = 0;\n    else\n      connectAuto = vals['connect-automatically'] || 1;\n    $(\"#connect-automatically-select\").prop('selectedIndex', connectAuto);\n  });\n\n  $(\"#connect-automatically-select\").change(function() {\n    chrome.storage.local.set({\n      'connect-automatically': this.selectedIndex\n    })\n  });\n\n  $('#connect-android').hide();\n\n  $('.purchase').click(function() {\n    _lm.startPurchase();\n  });\n\n  chrome.storage.local.get('lastConnectAddress', function(d) {\n    if (d.lastConnectAddress)\n      $('#connect-address')[0].value = d.lastConnectAddress;\n  })\n\n  $('#connect-ok').click(function() {\n    $('#connectModal').modal('hide');\n    var address = $('#connect-address')[0].value;\n    chrome.storage.local.set({\n      'lastConnectAddress': address\n    });\n    Adb.sendHostCommand('host:disconnect:' + address, function(socket, data) {\n      if (socket)\n        socket.destroy();\n\n      Adb.sendHostCommand('host:connect:' + address, function(socket, data) {\n        if (!socket)\n          return;\n        console.log('adb connect result', ab2str(data));\n      });\n    });\n  })\n\n  chrome.storage.local.get('survey0', function(data) {\n    if (data.survey0)\n      $('#survey').hide();\n  });\n\n  $('#survey').click(function() {\n    chrome.storage.local.set({ survey0: true });\n    $('#survey').hide();\n  })\n\n  $('#connect-cancel').click(function() {\n    $('#connectModal').modal('hide');\n  })\n\n  $('#connect-network').click(function() {\n    $('#connectModal').modal();\n  })\n\n  $('#login').click(function() {\n    $('#login-line').hide();\n    $('#logging-in').show();\n\n    getAuthToken(true, function(token) {\n      if (!token) {\n        shortModal(null, 'Error retrieving auth token: ' + chrome.runtime.lastError);\n        $('#login-line').show();\n        $('#logging-in').hide();\n        return;\n      }\n      $('#logging-in').hide();\n\n      refreshLoginState();\n    })\n  });\n\n  populateDisplaySettings();\n\n  function checkUsage() {\n    chrome.storage.local.get(['vysorUsage'], function(d) {\n      var vysorUsage = d.vysorUsage;\n      if (!vysorUsage)\n        vysorUsage = 0;\n      var hoursUsed = vysorUsage / (60 * 60 * 1000);\n      // half hour\n      hoursUsed = Math.round(hoursUsed * 2) / 2;\n      console.log('hours used', hoursUsed);\n      $('#used').html(\"You've used Vysor for \" + hoursUsed + \" hours.<br/>An advertisement will be shown every 15 minutes while viewing an Android.<br/><br/>Purchase Vysor Pro to remove ads and unlock all features.\")\n    });\n\n    setTimeout(checkUsage, 60 * 60 * 1000)\n  }\n\n  refreshListWithLicense();\n  checkUsage();\n\n  if (window.tracker)\n    tracker.sendAppView('list');\n});\n\n\nfunction libind(feature, f, fb) {\n  return function() {\n    if (!_lm._il) {\n      showModal({\n        title: 'Vysor Pro',\n        body: 'The ' + feature + ' feature is only avaiable to Vysor Pro users.',\n        okButton: 'Upgrade',\n        ok: function() {\n          _lm.startPurchase();\n        }\n      })\n      if (fb)\n        fb.apply(this, arguments);\n      return;\n    }\n    f.apply(this, arguments);\n  };\n}\n\nfunction openDeviceSettings(serialno, deviceName) {\n  var existing = chrome.app.window.get(serialno);\n  if (existing && existing.contentWindow.showSettings) {\n    existing.contentWindow.showSettings();\n    existing.show();\n    return;\n  }\n\n  loadDeviceSettings(serialno, function(deviceSettings) {\n    var ok = $('#settings-ok');\n    var cancel = $('#settings-cancel');\n    var defaults = $('#settings-defaults');\n    var edit = $('#new-display-name');\n    edit.prop('value', deviceSettings.friendlyName);\n    edit.prop('placeholder', deviceName);\n\n    defaults.unbind('click');\n    ok.unbind('click');\n    cancel.unbind('click');\n    $(edit).unbind('focus');\n    $(edit).unbind('keypress');\n    $(edit).bind(\"keypress\", function(e) {\n      var key = e.which;\n      if(key == 13) {\n        commit();\n        return false;\n      }\n    });\n\n    function commit() {\n      $('#settings-modal').modal('hide');\n      var newName = $(edit).prop('value');\n      deviceSettings.friendlyName = newName;\n      updateDeviceName(serialno, deviceSettings.friendlyName || deviceName);\n      saveDeviceSettings(serialno, deviceSettings);\n    }\n\n    ok.click(commit);\n    defaults.click(function() {\n      deviceSettings = getDefaultDeviceSettings();\n      applyDeviceSettings(deviceSettings);\n    });\n\n    var name = deviceName || friendlyName;\n\n    $('#settings-title').text(name + ' Settings');\n\n    $('#softkeys-check').unbind('change');\n    $('#pin-title-check').unbind('change');\n    $('#always-on-top-check').unbind('change');\n    $('#bitrate').unbind('change');\n    $('#resolution').unbind('change');\n\n    applyDeviceSettings(deviceSettings);\n\n    $(\"#softkeys-check\").change(function() {\n      deviceSettings.showSoftKeys = this.checked;\n    });\n\n    $('#pin-title-check').change(function() {\n      deviceSettings.pinTitleBar = this.checked;\n    })\n\n    $('#always-on-top-check').change(libind('Always On Top', function() {\n      deviceSettings.alwaysOnTop = this.checked;\n    }, function() {\n      this.checked = false;\n    }));\n\n    $('#bitrate').change(libind('Image Quality', function() {\n      deviceSettings.bitrate = this.selectedIndex;\n    }, function() {\n      this.selectedIndex = 0;\n    }));\n\n    $('#resolution').change(libind('Image Quality', function() {\n      deviceSettings.resolution = this.selectedIndex;\n    }, function() {\n      this.selectedIndex = 0;\n    }));\n\n    $('#decoder').change(libind('Image Quality', function() {\n      deviceSettings.decoder = this.selectedIndex;\n    }, function() {\n      this.selectedIndex = 0;\n    }));\n\n    $('#display-settings').change(libind('Display Settings', function() {\n      var displaySettings = commonDisplaySettings[this.selectedIndex];\n      deviceSettings.displaySettings = displaySettings;\n    }, function() {\n      this.selectedIndex = 0;\n    }));\n\n    $('#dim-display').change(libind('Dim Dislay', function() {\n      deviceSettings.dimDisplay = this.checked;\n    }, function() {\n      this.checked = false;\n    }));\n\n    $('#settings-modal').modal();\n  });\n}\n\nvar lastAdbDevices = {};\nvar lastVysorSharedDevices = {};\nvar lastVysorDeviceFarms = {};\nfunction refreshList(adbDevices, vysorVirtualDevices, myUserInfo, vysorDeviceFarms, vysorSharedDevices, tcpSerialMappings, serialTcpMappings, vysorShareServer, hadAdbServer, adbServerIsRunning, adbPort) {\n  lastAdbDevices = adbDevices;\n  lastVysorSharedDevices = vysorSharedDevices;\n  lastVysorDeviceFarms = vysorDeviceFarms;\n\n  $(\"#share-all-check\").prop('checked', vysorShareServer)\n\n  if (Object.keys(adbDevices).length || !adbServerIsRunning)\n    $('#not-found').hide();\n  else\n    $('#not-found').show();\n\n  if (!isElectron() && (!hadAdbServer || adbServerIsRunning)) {\n    $('#connect-android').show();\n    $('#no-devices').hide();\n  }\n  else {\n    $('#connect-android').hide();\n    $('#no-devices').show();\n  }\n\n  if (!hadAdbServer) {\n    // no adb server on windows 10 is fatal!\n    if (navigator.userAgent.indexOf('Windows NT 10') != -1 && adbPort == null) {\n      $('#adb-server-status').show();\n      $('#adb-server-status').html(\"Windows 10 users MUST download the latest <a href='https://adb.clockworkmod.com' target='_blank'> Universal ADB Drivers</a>\");\n    }\n    else {\n      $('#adb-server-status').show();\n      $('#adb-server-status').text('ADB not running. Click Find Devices to get started.');\n    }\n  }\n  else {\n    $('#adb-server-status').show();\n    if (adbServerIsRunning) {\n      $('#adb-server-status').text('Using built-in Vysor ADB.');\n    }\n    else {\n      $('#adb-server-status').text('Using Android SDK ADB binary.');\n    }\n  }\n\n  var keys = Object.keys(adbDevices);\n  var farms = Object.keys(lastVysorDeviceFarms);\n\n  $.each($('.vysor-device'), function(index, ele) {\n    if (adbDevices[ele.name])\n      return;\n    var found;\n    $.each(farms, function(index, id) {\n      var farm = lastVysorDeviceFarms[id];\n      if (farm.devices && farm.devices[ele.name])\n        found = true;\n    })\n    if (!found)\n      $(ele).remove();\n  });\n\n\n  if (!keys.length) {\n    var ele = $('#devices').find('#no-vysor-devices');\n    if (!ele.length) {\n      ele = $('<a id=\"no-vysor-devices\" href=\"https://support.vysor.io/support/technical/notfound/\" target=\"_blank\"><div class=\"alert alert-danger\">No devices found. Make sure Android USB Debugging is enabled.</div></a>');\n      $('#devices').append(ele);\n    }\n    if (!hadAdbServer || adbServerIsRunning) {\n      $('#choose-header').hide();\n      ele.hide();\n    }\n  }\n  else {\n    $('#no-vysor-devices').remove();\n    $('#choose-header').show();\n\n    $(keys).each(function(index, serialno) {\n      // skip this, it is later in the list\n      if (vysorVirtualDevices[serialno] && vysorVirtualDevices[serialno].farm)\n        return;\n      var d = adbDevices[serialno];\n      var deviceName = d.name;\n\n      var ele = $('#devices').find('.vysor-device[name=\"' + serialno + '\"]');\n      if (!ele.length) {\n        ele = $('<a class=\"list-group-item vysor-device\"><button type=\"button\" class=\"btn btn-sm device-settings btn-default\"><i class=\"fa fa-gear\" title=\"Device Settings\"></i></button><button type=\"button\" class=\"btn btn-sm wireless btn-default\"><i class=\"fa fa-wifi\" title=\"Go Wireless\"></i></button><button type=\"button\" class=\"btn btn-sm share btn-default\">Share</button><button type=\"button\" class=\"btn btn-sm btn-success\">View</button><img class=\"avatar img-rounded\"></img><h5 class=\"list-group-item-heading friendly-name\"></h5><p class=\"list-group-item-text serialno\"></p></a>');\n        ele[0].name = serialno;\n\n        var share = ele.find('.share');\n        var img = ele.find('img');\n\n        img.click(function(e) {\n          e.stopPropagation();\n          var userInfo = lastVysorSharedDevices[serialno].userInfo;\n          blobFromUrl(userInfo.picture, function(blob) {\n            shortModal('Vysor Share', 'Device in use by ' + userInfo.name);\n          })\n        })\n\n        ele.find('.wireless').click(libind('Go Wireless', function(e) {\n          e.stopPropagation();\n          startWireless(serialno);\n        }, function(e) {\n          e.stopPropagation();\n        }));\n\n        if (vysorVirtualDevices[serialno]) {\n          $(share).removeClass('btn-default').addClass('btn-danger')\n          share.text('Disconnect')\n          share.click(function(e) {\n            e.stopPropagation();\n            disconnectSharedDevice(serialno);\n          })\n        }\n        else {\n          $(share).removeClass('btn-danger').addClass('btn-default')\n          share.click(libind('Vysor Share', function(e) {\n            e.stopPropagation();\n            toggleShare(serialno, function(url, err) {\n              if (err) {\n                shortModal(\"Vysor Share\", err);\n                return;\n              }\n              copyTextToClipboard(url);\n              var appName = chrome.runtime.getManifest().name;\n              shortModal('Copied Vysor Share URL to clipboard', url);\n              var wirelessSerial = serialTcpMappings[serialno];\n              if (wirelessSerial)\n                closeWindow(wirelessSerial);\n              closeWindow(serialno);\n            });\n          }, function(e) {\n            e.stopPropagation();\n          }));\n        }\n\n        $(ele).find('.device-settings').click(function(e) {\n          e.stopPropagation();\n          openDeviceSettings(serialno, deviceName);\n        })\n\n        ele.click(function() {\n          var d = lastAdbDevices[serialno];\n          if (d.status == 'unauthorized') {\n            shortModal(null, 'Check your Android device and accept the \"Allow USB Debugging\" prompt. You may need to disconnect and reconnect your Android for the dialog to show.');\n          }\n          else if (d.status == 'offline') {\n            shortModal(null, 'Your Android USB connection is offline. Please try rebooting your Android.');\n          }\n          else {\n            function view() {\n              tracker.sendEvent('click-device', deviceName);\n              var wirelessSerial = serialTcpMappings[serialno];\n              if (wirelessSerial)\n                closeWindow(wirelessSerial);\n              openWindow(serialno);\n            }\n\n            if (lastVysorSharedDevices[serialno]) {\n              showModal({\n                title: 'Android In Use',\n                body: 'This Android is currently shared. Do you want to end the share session?',\n                okButton: 'Unshare and View',\n                ok: function() {\n                  var wirelessSerial = serialTcpMappings[serialno];\n                  if (wirelessSerial)\n                    unshareDevice(wirelessSerial);\n                  unshareDevice(serialno);\n                  view();\n                }\n              })\n              return;\n            }\n\n            view();\n          }\n        })\n\n        // the shitty way to check to see if this is a tcp connect\n        if (serialno.indexOf(':') != -1)\n          ele.find('.wireless').hide();\n        else\n          ele.find('.wireless').show();\n\n        ele.find('.serialno').text('Serial: ' + serialno);\n\n        $('#devices').append(ele);\n      }\n\n      loadDeviceSettings(serialno, function(deviceSettings) {\n        var display = deviceSettings.friendlyName || deviceName;\n        if (d.status == 'unauthorized')\n          display = 'Unauthorized';\n        if (d.status == 'offline')\n          display = 'Offline';\n        updateDeviceName(serialno, display);\n      })\n\n      var usb = tcpSerialMappings[serialno];\n      if (usb && adbDevices[usb])\n        ele.hide();\n      else\n        ele.show();\n\n      var share = ele.find('.share');\n      var img = ele.find('img');\n\n      if (lastVysorSharedDevices[serialno] && lastVysorSharedDevices[serialno].userInfo && lastVysorSharedDevices[serialno].userInfo.picture) {\n        var userInfo = lastVysorSharedDevices[serialno].userInfo;\n        img.attr('alt', 'Device in use by ' + userInfo.name)\n        blobFromUrl(userInfo.picture, function(blob) {\n          img.attr('src', blob);\n        })\n        img.show();\n      }\n      else {\n        img.hide();\n      }\n\n      if (!vysorVirtualDevices[serialno]) {\n        if (lastVysorSharedDevices[serialno])\n          share.text('Unshare')\n        else\n          share.text('Share');\n      }\n\n      // if (!gcmSocketManager)\n      //   share.hide();\n      // else\n      //   share.show();\n    });\n  }\n\n  $.each($('.vysor-farm'), function(index, ele) {\n    if (!lastVysorDeviceFarms[ele.name])\n      $(ele).remove();\n  });\n\n  $(farms).each(function(index, id) {\n    var llibind = libind;\n    if (id == '117634581230601031713') {\n      llibind = function(s, f) {\n        return f;\n      }\n    }\n    var farm = lastVysorDeviceFarms[id];\n    if (!farm.devices)\n      return;\n    var keys = Object.keys(farm.devices);\n    if (!keys.length)\n      return;\n    var farmList = $('#farms-list').find('#farm-list-'+ id);\n    if (!farmList.length) {\n      var farmEle = $(\"<h5 class='list-header vysor-farm'>\" + farm.info.name +\"'s Shared Devices <button class='btn btn-danger btn-xs' style='float: right;' type='button'>Disconnect</button></h5>\");\n      farmEle[0].name = id;\n      $('#farms-list').append(farmEle);\n      farmEle.find('button').click(function() {\n        destroyDeviceFarmConnection(id);\n      })\n      farmList = $(\"<div class='vysor-farm list-group'></div>\")\n      farmList[0].name = id;\n      farmList.attr('id', 'farm-list-' + id);\n      $('#farms-list').append(farmList);\n    }\n\n    $(keys).each(function(index, serialno) {\n      var d = farm.devices[serialno];\n      var deviceName = d.name;\n      var display = deviceName;\n      var displaySerial;\n      if (farm.gcmConn.gcmConns[serialno])\n        displaySerial = 'Serial: ' + farm.gcmConn.gcmConns[serialno].serialno;\n      else\n        displaySerial = 'Remote Serial: ' + serialno;\n\n      var ele = $('#farms-list').find('.vysor-device[name=\"' + serialno + '\"]');\n      if (!ele.length) {\n        ele = $('<a class=\"list-group-item vysor-device\"><button type=\"button\" class=\"btn btn-sm device-settings btn-default\"><i class=\"fa fa-gear\" title=\"Device Settings\"></i></button><button type=\"button\" class=\"btn btn-sm connect\"></button><button type=\"button\" class=\"btn btn-sm btn-success\">View</button><img class=\"avatar img-rounded\"></img><h5 class=\"list-group-item-heading friendly-name\"></h5><p class=\"list-group-item-text serialno\"></p></a>');\n        ele[0].name = serialno;\n\n        function promptKick(cb) {\n          var farm = lastVysorDeviceFarms[id];\n          if (farm.sharedDevices && farm.sharedDevices[serialno] && farm.sharedDevices[serialno].userInfo) {\n            if (farm.sharedDevices[serialno].userInfo.id == myUserInfo.id) {\n              cb();\n              return;\n            }\n            showModal({\n              title: 'Android In Use',\n              body: 'This Android is currently in use by ' + farm.sharedDevices[serialno].userInfo.name + ' (' + farm.sharedDevices[serialno].userInfo.email + '). Do you want to boot them off?',\n              okButton: 'Connect Anyways',\n              ok: cb\n            })\n          }\n          else {\n            cb();\n          }\n        }\n\n        ele.find('.device-settings').click(function(e) {\n          e.stopPropagation();\n          openDeviceSettings(serialno, deviceName);\n        })\n\n        ele.find('.connect').click(llibind(\"Vysor Share\", function(e) {\n          var farm = lastVysorDeviceFarms[id];\n          e.stopPropagation();\n          var gcmConn = farm.gcmConn.gcmConns[serialno];\n          if (gcmConn) {\n            closeWindow(gcmConn.serialno);\n            gcmConn.destroy();\n            ele.find('.connect').text('Connect');\n          }\n          else {\n            promptKick(function() {\n              ele.find('.connect').text('Disconnect');\n              createDeviceFarmConnection(id, serialno, function(serialno) {\n                quietSerial(serialno)\n              });\n            })\n          }\n        }, function(e) {\n          e.stopPropagation();\n        }))\n\n        ele.click(llibind(\"Vysor Share\", function(e) {\n          var farm = lastVysorDeviceFarms[id];\n          promptKick(function() {\n            var gcmConn = farm.gcmConn.gcmConns[serialno];\n            if (gcmConn) {\n              openWindow(gcmConn.serialno);\n            }\n            else {\n              ele.find('.connect').text('Connect');\n              openWindow(serialno);\n              createDeviceFarmConnection(id, serialno, function(serialno) {\n                openWindow(serialno);\n              });\n            }\n          });\n        }, function(e) {\n          e.stopPropagation();\n        }))\n\n        var img = ele.find('img');\n        img.click(function(e) {\n          e.stopPropagation();\n          var farm = lastVysorDeviceFarms[id];\n          var userInfo = farm.sharedDevices[serialno].userInfo;\n          shortModal('Vysor Share', 'Device in use by ' + userInfo.name);\n        });\n\n        loadDeviceSettings(serialno, function(deviceSettings) {\n          var display = deviceSettings.friendlyName || deviceName;\n          updateDeviceName(serialno, deviceSettings.friendlyName || deviceName);\n        })\n        ele.find('.serialno').text(displaySerial);\n\n        farmList.append(ele);\n      }\n\n\n      var img = ele.find('img');\n      if (farm.sharedDevices && farm.sharedDevices[serialno] && farm.sharedDevices[serialno].userInfo) {\n        var userInfo = farm.sharedDevices[serialno].userInfo;\n        img.attr('alt', 'Device in use by ' + userInfo.name)\n        blobFromUrl(userInfo.picture, function(blob) {\n          img.attr('src', blob);\n        })\n        img.show();\n      }\n      else {\n        img.hide();\n      }\n\n      if (farm.gcmConn.gcmConns[serialno])\n        ele.find('.connect').text('Disconnect').removeClass('btn-default').addClass('btn-danger');\n      else\n        ele.find('.connect').text('Connect').removeClass('btn-danger').addClass('btn-default');\n    })\n  });\n}\n\nchrome.notifications.onButtonClicked.addListener(function(nid, bid) {\n  if (nid == 'never-start-automatically') {\n    $(\"#connect-automatically-select\").prop('selectedIndex', 2);\n  }\n  else if (nid.startsWith('never-start-automatically-') && bid == 1) {\n    $(\"#connect-automatically-select\").prop('selectedIndex', 2);\n  }\n});\n\nsharedGlobals.refreshList = refreshList;\n\nfunction updateVysorShareServer(vysorShareServerUrl) {\n  if (!vysorShareServerUrl) {\n    $('#vysor-share-server-status').hide();\n    $('#whitelist-count').hide();\n  }\n  else {\n    $('#whitelist-count').show();\n    getVysorWhitelistStatus(function(status) {\n      $('#whitelist-count a').text(status)\n      .click(function(e) {\n        chrome.app.window.create('whitelist.html', {\n          id: 'whitelist',\n          innerBounds: {\n            width: 768,\n            height: 512,\n            minWidth: 768,\n            minHeight: 512\n          }\n        }, function(w) {\n          w.onClosed.addListener(function() {\n            updateVysorShareServer(vysorShareServerUrl);\n          })\n        });\n      })\n    })\n    $('#vysor-share-server-status').show();\n    $('#vysor-share-server-status').html('Vysor is sharing your devices: ' + '<a href=\"#\">' + vysorShareServerUrl + '</a>');\n    var ele = $('#vysor-share-server-status a');\n    ele.click(function() {\n      copyTextToClipboard(vysorShareServerUrl);\n      var appName = chrome.runtime.getManifest().name;\n      shortModal(\"Copied \" + appName + \" Share Server URL to clipboard.\", vysorShareServerUrl)\n    })\n  }\n}\n\nfunction findDeviceElement(serialno) {\n  return $('.vysor-device[name=\"' + serialno + '\"]');\n}\n\nfunction updateDeviceName(serialno, deviceName) {\n  var ele = findDeviceElement(serialno);\n  if (ele)\n    ele.find('.friendly-name').text(deviceName);\n}\n\nsharedGlobals.showModal = showModal;\nsharedGlobals.shortModal = shortModal;\nsharedGlobals.updateVysorShareServer = updateVysorShareServer;\nsharedGlobals.findDeviceElement = findDeviceElement;\nsharedGlobals.updateDeviceName = updateDeviceName;\n","function getWhitelist(cb) {\n  chrome.storage.local.get('whitelist', function(d) {\n    var ret = {};\n    if (!d.whitelist || d.whitelist.constructor.name != 'Array') {\n      cb(ret);\n      return;\n    }\n    $.each(d.whitelist, function(index, value) {\n      ret[value] = true;\n    })\n    cb(ret);\n  })\n}\n\nfunction saveWhitelist(whitelist, cb) {\n  chrome.storage.local.set({\n    'whitelist': Object.keys(whitelist)\n  }, cb)\n}\n\nfunction addToWhitelist(email, cb) {\n  getWhitelist(function(whitelist) {\n    whitelist[email] = true;\n    saveWhitelist(whitelist, cb);\n  })\n}\n\nfunction clearWhitelist() {\n  chrome.storage.local.remove('whitelist');\n}\n\nfunction isWhitelisted(email, cb) {\n  chrome.storage.local.get(['whitelist', 'serverMode'], function(d) {\n    if (d.serverMode == 1) {\n      cb(true);\n      return;\n    }\n    if (d.serverMode != 2) {\n      var ret = {};\n      if (!d.whitelist || d.whitelist.constructor.name != 'Array') {\n        cb(false, true);\n        return;\n      }\n      cb(d.whitelist.indexOf(email) != -1, true);\n      return;\n    }\n\n    getAuthToken(false, function(token) {\n      if (!token) {\n        console.error('unable to get token for vysor enterprise whitelist check');\n        cb(false);\n        return;\n      }\n\n      $.ajax({\n        type: 'get',\n        url: 'https://billing.vysor.io/whitelist',\n        headers: {\n          'Authorization': 'Bearer ' + token\n        },\n        data: {\n          email: email\n        },\n        error: function() {\n          console.error('failure checking vysor enterprise whitelist', arguments)\n          cb(false);\n        },\n        success: function(data) {\n          if (!data.whitelist)\n            console.error('access denied to', email, data);\n          cb(data.whitelist, false);\n        }\n      });\n    })\n  })\n}\n\nfunction getVysorWhitelistStatus(cb) {\n  chrome.storage.local.get(['whitelist', 'serverMode'], function(d) {\n    if (d.serverMode == 1) {\n      cb('Any user can access this server.');\n      return;\n    }\n    if (d.serverMode == 2) {\n      cb('Your Vysor Enterprise users can access this server.');\n      return;\n    }\n    var number;\n    if (!d.whitelist || d.whitelist.constructor.name != 'Array')\n      number = 0;\n    else\n      number = d.whitelist.length;\n    cb(number + ' user(s) can access this server.');\n  })\n}\n\nexports.getVysorWhitelistStatus = getVysorWhitelistStatus;\nexports.isWhitelisted = isWhitelisted;\nexports.clearWhitelist = clearWhitelist;\nexports.addToWhitelist = addToWhitelist;\nexports.saveWhitelist = saveWhitelist;\nexports.getWhitelist = getWhitelist;\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n"],"sourceRoot":""}