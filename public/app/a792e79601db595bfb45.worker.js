!function(n){var t={};function e(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return n[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=n,e.c=t,e.d=function(n,t,i){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:i})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var r in n)e.d(i,r,function(t){return n[t]}.bind(null,r));return i},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=3)}([function(n,t,e){(function(n){var e,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(n){(n=n||{})||(n=void 0!==n?n:{});var t,e={};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);var o,u=[],a="";a=self.location.href,i&&(a=i),a=0!==a.indexOf("blob:")?a.substr(0,a.lastIndexOf("/")+1):"",o=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)};var f,c,s=n.print||console.log.bind(console),l=n.printErr||console.warn.bind(console);for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);e=null,n.arguments&&(u=n.arguments),n.thisProgram&&n.thisProgram,n.quit&&n.quit,n.wasmBinary&&(f=n.wasmBinary),n.noExitRuntime&&n.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":r(WebAssembly))&&l("no native wasm support detected");var y,h,d,b,m,v,w,p=new WebAssembly.Table({initial:1,maximum:1,element:"anyfunc"}),A=!1;function g(t){y=t,n.HEAP8=h=new Int8Array(t),n.HEAP16=b=new Int16Array(t),n.HEAP32=m=new Int32Array(t),n.HEAPU8=d=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=new Uint32Array(t),n.HEAPF32=v=new Float32Array(t),n.HEAPF64=w=new Float64Array(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf8"),"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var j=n.TOTAL_MEMORY||16777216;function S(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var i=e.func;"number"==typeof i?void 0===e.arg?n.dynCall_v(i):n.dynCall_vi(i,e.arg):i(void 0===e.arg?null:e.arg)}else e()}}(c=n.wasmMemory?n.wasmMemory:new WebAssembly.Memory({initial:j/65536}))&&(y=c.buffer),j=y.byteLength,g(y),m[2188]=5251792;var T=[],W=[],M=[],O=[],U=0,k=null,x=null;function R(t){throw n.onAbort&&n.onAbort(t),s(t+=""),l(t),A=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(t)}function I(n){return String.prototype.startsWith?n.startsWith("data:application/octet-stream;base64,"):0===n.indexOf("data:application/octet-stream;base64,")}n.preloadedImages={},n.preloadedAudios={};var D,_="TinyH264.wasm";function B(){try{if(f)return new Uint8Array(f);if(o)return o(_);throw"both async and sync fetching of the wasm failed"}catch(n){R(n)}}function E(n){try{return c.grow(n-y.byteLength+65535>>16),g(c.buffer),1}catch(n){}}I(_)||(D=_,_=n.locateFile?n.locateFile(D,a):a+D),W.push({func:function(){q()}});var F={a:function(n,t,e){d.set(d.subarray(t,t+e),n)},b:function(n){var t=h.length;if(n>2147418112)return!1;for(var e,i,r=1;r<=4;r*=2){var o=t*(1+.2/r);if(o=Math.min(o,n+100663296),E(Math.min(2147418112,((e=Math.max(16777216,n,o))%(i=65536)>0&&(e+=i-e%i),e))))return!0}return!1},memory:c,table:p},H=function(){var t={env:F,wasi_snapshot_preview1:F};function e(t,e){var i=t.exports;n.asm=i,function(t){if(U--,n.monitorRunDependencies&&n.monitorRunDependencies(U),0==U&&(null!==k&&(clearInterval(k),k=null),x)){var e=x;x=null,e()}}()}function i(n){e(n.instance)}function r(n){return(f||"function"!=typeof fetch?new Promise((function(n,t){n(B())})):fetch(_,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at '"+_+"'";return n.arrayBuffer()})).catch((function(){return B()}))).then((function(n){return WebAssembly.instantiate(n,t)})).then(n,(function(n){l("failed to asynchronously prepare wasm: "+n),R(n)}))}if(U++,n.monitorRunDependencies&&n.monitorRunDependencies(U),n.instantiateWasm)try{return n.instantiateWasm(t,e)}catch(n){return l("Module.instantiateWasm callback failed with error: "+n),!1}return function(){if(f||"function"!=typeof WebAssembly.instantiateStreaming||I(_)||"function"!=typeof fetch)return r(i);fetch(_,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,t).then(i,(function(n){l("wasm streaming compile failed: "+n),l("falling back to ArrayBuffer instantiation"),r(i)}))}))}(),{}}();n.asm=H;var P,q=n.___wasm_call_ctors=function(){return(q=n.___wasm_call_ctors=n.asm.c).apply(null,arguments)};function C(t){function e(){P||(P=!0,A||(S(W),S(M),n.onRuntimeInitialized&&n.onRuntimeInitialized(),function(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)t=n.postRun.shift(),O.unshift(t);var t;S(O)}()))}t=t||u,U>0||(function(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)t=n.preRun.shift(),T.unshift(t);var t;S(T)}(),U>0||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}if(n._h264bsdInit=function(){return(n._h264bsdInit=n.asm.d).apply(null,arguments)},n._malloc=function(){return(n._malloc=n.asm.e).apply(null,arguments)},n._free=function(){return(n._free=n.asm.f).apply(null,arguments)},n._h264bsdDecode=function(){return(n._h264bsdDecode=n.asm.g).apply(null,arguments)},n._h264bsdShutdown=function(){return(n._h264bsdShutdown=n.asm.h).apply(null,arguments)},n._h264bsdAlloc=function(){return(n._h264bsdAlloc=n.asm.i).apply(null,arguments)},n._h264bsdFree=function(){return(n._h264bsdFree=n.asm.j).apply(null,arguments)},n.asm=H,n.getValue=function(n,t,e){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return h[n>>0];case"i16":return b[n>>1];case"i32":case"i64":return m[n>>2];case"float":return v[n>>2];case"double":return w[n>>3];default:R("invalid type for getValue: "+t)}return null},n.then=function(t){if(P)t(n);else{var e=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){e&&e(),t(n)}}return n},x=function n(){P||C(),P||(x=n)},n.run=C,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return C(),n});"object"===r(t)&&"object"===r(n)?n.exports=o:void 0===(e=function(){return o}.apply(t,[]))||(n.exports=e)}).call(this,e(2)(n))},function(n,t,e){n.exports=function(){return new Worker(e.p+"b236a27a1dcc54aa309b.worker.js")}},function(n,t){n.exports=function(n){return n.webpackPolyfill||(n.deprecate=function(){},n.paths=[],n.children||(n.children=[]),Object.defineProperty(n,"loaded",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(n,"id",{enumerable:!0,get:function(){return n.i}}),n.webpackPolyfill=1),n}},function(n,t,e){"use strict";e.r(t);var i=function(){function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.tinyH264Module=t,this.onPictureReady=e,this.pStorage=this.tinyH264Module._h264bsdAlloc(),this.pWidth=this.tinyH264Module._malloc(4),this.pHeight=this.tinyH264Module._malloc(4),this.pPicture=this.tinyH264Module._malloc(4),this._decBuffer=this.tinyH264Module._malloc(1048576),this.tinyH264Module._h264bsdInit(this.pStorage,0)}return n.prototype.release=function(){var n=this.pStorage;0!==n&&(this.tinyH264Module._h264bsdShutdown(n),this.tinyH264Module._h264bsdFree(n)),this.tinyH264Module._free(this.pWidth),this.tinyH264Module._free(this.pHeight),this.tinyH264Module._free(this.pPicture),this.pStorage=0,this.pWidth=0,this.pHeight=0},n.prototype.decode=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),this.tinyH264Module.HEAPU8.set(t,this._decBuffer),this.tinyH264Module._h264bsdDecode(this.pStorage,this._decBuffer,t.byteLength,this.pPicture,this.pWidth,this.pHeight)===n.PIC_RDY){var e=this.tinyH264Module.getValue(this.pWidth,"i32"),i=this.tinyH264Module.getValue(this.pHeight,"i32"),r=this.tinyH264Module.getValue(this.pPicture,"i8*"),o=new Uint8Array(this.tinyH264Module.HEAPU8.subarray(r,r+e*i*3/2));this.onPictureReady(o,e,i)}},n}();i.RDY=0,i.PIC_RDY=1,i.HDRS_RDY=2,i.ERROR=3,i.PARAM_SET_ERROR=4,i.MEMALLOC_ERROR=5;var r=i,o=e(0),u=e.n(o),a=e.p+"f99175d3b657e4fac2c971aa69fe9513.asset";var f=e(1),c=e.n(f);const s={"TinyH264.wasm":a};!async function(){const n=u()({locateFile:n=>s[n]});let t,e;await function(n){return new Promise(t=>{n.calledRun?t():n.onRuntimeInitialized=()=>t()})}(n);let i=new r(n,(n,i,r)=>{t?t.onPicture(n,i,r):e?e.postMessage({type:"pictureReady",width:i,height:r,data:n.buffer},[n.buffer]):postMessage({type:"pictureReady",width:i,height:r,data:n.buffer},[n.buffer])});self.addEventListener("message",n=>{const t=n.data;switch(t.type){case"canvas":{let n=t.canvas;e=new c.a,e.postMessage({type:"canvas",canvas:n},[n]);break}case"decode":i.decode(new Uint8Array(t.data,t.offset,t.length)),postMessage({type:"decoded"});break;case"release":i&&(i.release(),e&&(e.terminate(),e=void 0),i=void 0)}}),self.postMessage({type:"decoderReady"})}()}]);
//# sourceMappingURL=a792e79601db595bfb45.worker.js.map