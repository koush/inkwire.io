{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tinyh264/es/TinyH264.js","webpack:///./src/tinydecoder/CanvasRenderer.worker.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/tinyh264/es/TinyH264Decoder.js","webpack:///./node_modules/tinyh264/es/TinyH264.wasm.asset","webpack:///./src/tinydecoder/CanvasRenderer.js","webpack:///./src/tinydecoder/H264NALDecoder.worker.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_scriptDir","obj","constructor","Module","document","currentScript","src","undefined","moduleOverrides","readBinary","arguments_","scriptDirectory","self","location","href","indexOf","substr","lastIndexOf","url","xhr","XMLHttpRequest","open","responseType","send","Uint8Array","response","wasmBinary","wasmMemory","out","console","log","err","warn","WebAssembly","_typeof","buffer","HEAP8","HEAPU8","HEAP16","HEAP32","HEAPF32","HEAPF64","wasmTable","Table","ABORT","updateGlobalBufferAndViews","buf","Int8Array","Int16Array","Int32Array","Uint16Array","Uint32Array","Float32Array","Float64Array","TextDecoder","INITIAL_TOTAL_MEMORY","callRuntimeCallbacks","callbacks","length","callback","shift","func","arg","Memory","byteLength","DYNAMICTOP_PTR","__ATPRERUN__","__ATINIT__","__ATMAIN__","__ATPOSTRUN__","runDependencies","runDependencyWatcher","dependenciesFulfilled","abort","what","RuntimeError","isDataURI","filename","String","startsWith","path","wasmBinaryFile","getBinary","emscripten_realloc_buffer","size","grow","e","push","___wasm_call_ctors","asmLibraryArg","dest","num","set","subarray","requestedSize","oldSize","x","multiple","cutDown","overGrownHeapSize","Math","min","max","asm","info","receiveInstance","instance","id","clearInterval","removeRunDependency","receiveInstantiatedSource","output","instantiateArrayBuffer","receiver","fetch","Promise","resolve","reject","credentials","then","catch","binary","instantiate","reason","instantiateStreaming","instantiateAsync","createWasm","calledRun","apply","arguments","run","args","doRun","cb","unshift","postRun","preRun","setTimeout","ptr","type","noSafe","charAt","old","runCaller","pop","Worker","webpackPolyfill","deprecate","paths","children","TinyH264Decoder","tinyH264Module","onPictureReady","Constructor","TypeError","_classCallCheck","this","pStorage","_h264bsdAlloc","pWidth","_malloc","pHeight","pPicture","_decBuffer","_h264bsdInit","release","_h264bsdShutdown","_h264bsdFree","_free","decode","nal","ArrayBuffer","_h264bsdDecode","PIC_RDY","width","getValue","height","picPtr","pic","RDY","HDRS_RDY","ERROR","PARAM_SET_ERROR","MEMALLOC_ERROR","assets","async","tinyH264","locateFile","canvasRenderer","canvasWorker","onRuntimeInitialized","loadNativeModule","decoder","onPicture","postMessage","data","addEventListener","message","canvas","offset","terminate","init"],"mappings":"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","file":"a792e79601db595bfb45.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar Module = function () {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n\n  return function (Module) {\n    Module = Module || {};\n\n    var Module;if (!Module) Module = typeof Module !== 'undefined' ? Module : {};var moduleOverrides = {};var key;for (key in Module) {\n      if (Module.hasOwnProperty(key)) {\n        moduleOverrides[key] = Module[key];\n      }\n    }var arguments_ = [];var thisProgram = \"./this.program\";var quit_ = function quit_(status, toThrow) {\n      throw toThrow;\n    };var ENVIRONMENT_IS_WEB = false;var ENVIRONMENT_IS_WORKER = true;var scriptDirectory = \"\";function locateFile(path) {\n      if (Module[\"locateFile\"]) {\n        return Module[\"locateFile\"](path, scriptDirectory);\n      }return scriptDirectory + path;\n    }var read_, readAsync, readBinary, setWindowTitle;if (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {\n      if (ENVIRONMENT_IS_WORKER) {\n        scriptDirectory = self.location.href;\n      } else if (document.currentScript) {\n        scriptDirectory = document.currentScript.src;\n      }if (_scriptDir) {\n        scriptDirectory = _scriptDir;\n      }if (scriptDirectory.indexOf(\"blob:\") !== 0) {\n        scriptDirectory = scriptDirectory.substr(0, scriptDirectory.lastIndexOf(\"/\") + 1);\n      } else {\n        scriptDirectory = \"\";\n      }{\n        read_ = function shell_read(url) {\n          var xhr = new XMLHttpRequest();xhr.open(\"GET\", url, false);xhr.send(null);return xhr.responseText;\n        };if (ENVIRONMENT_IS_WORKER) {\n          readBinary = function readBinary(url) {\n            var xhr = new XMLHttpRequest();xhr.open(\"GET\", url, false);xhr.responseType = \"arraybuffer\";xhr.send(null);return new Uint8Array(xhr.response);\n          };\n        }readAsync = function readAsync(url, onload, onerror) {\n          var xhr = new XMLHttpRequest();xhr.open(\"GET\", url, true);xhr.responseType = \"arraybuffer\";xhr.onload = function xhr_onload() {\n            if (xhr.status == 200 || xhr.status == 0 && xhr.response) {\n              onload(xhr.response);return;\n            }onerror();\n          };xhr.onerror = onerror;xhr.send(null);\n        };\n      }setWindowTitle = function setWindowTitle(title) {\n        document.title = title;\n      };\n    } else {}var out = Module[\"print\"] || console.log.bind(console);var err = Module[\"printErr\"] || console.warn.bind(console);for (key in moduleOverrides) {\n      if (moduleOverrides.hasOwnProperty(key)) {\n        Module[key] = moduleOverrides[key];\n      }\n    }moduleOverrides = null;if (Module[\"arguments\"]) arguments_ = Module[\"arguments\"];if (Module[\"thisProgram\"]) thisProgram = Module[\"thisProgram\"];if (Module[\"quit\"]) quit_ = Module[\"quit\"];var wasmBinary;if (Module[\"wasmBinary\"]) wasmBinary = Module[\"wasmBinary\"];var noExitRuntime;if (Module[\"noExitRuntime\"]) noExitRuntime = Module[\"noExitRuntime\"];if ((typeof WebAssembly === 'undefined' ? 'undefined' : _typeof(WebAssembly)) !== \"object\") {\n      err(\"no native wasm support detected\");\n    }function getValue(ptr, type, noSafe) {\n      type = type || \"i8\";if (type.charAt(type.length - 1) === \"*\") type = \"i32\";switch (type) {case \"i1\":\n          return HEAP8[ptr >> 0];case \"i8\":\n          return HEAP8[ptr >> 0];case \"i16\":\n          return HEAP16[ptr >> 1];case \"i32\":\n          return HEAP32[ptr >> 2];case \"i64\":\n          return HEAP32[ptr >> 2];case \"float\":\n          return HEAPF32[ptr >> 2];case \"double\":\n          return HEAPF64[ptr >> 3];default:\n          abort(\"invalid type for getValue: \" + type);}return null;\n    }var wasmMemory;var wasmTable = new WebAssembly.Table({ \"initial\": 1, \"maximum\": 1 + 0, \"element\": \"anyfunc\" });var ABORT = false;var EXITSTATUS = 0;var UTF8Decoder = typeof TextDecoder !== \"undefined\" ? new TextDecoder(\"utf8\") : undefined;var UTF16Decoder = typeof TextDecoder !== \"undefined\" ? new TextDecoder(\"utf-16le\") : undefined;var WASM_PAGE_SIZE = 65536;function alignUp(x, multiple) {\n      if (x % multiple > 0) {\n        x += multiple - x % multiple;\n      }return x;\n    }var buffer, HEAP8, HEAPU8, HEAP16, HEAPU16, HEAP32, HEAPU32, HEAPF32, HEAPF64;function updateGlobalBufferAndViews(buf) {\n      buffer = buf;Module[\"HEAP8\"] = HEAP8 = new Int8Array(buf);Module[\"HEAP16\"] = HEAP16 = new Int16Array(buf);Module[\"HEAP32\"] = HEAP32 = new Int32Array(buf);Module[\"HEAPU8\"] = HEAPU8 = new Uint8Array(buf);Module[\"HEAPU16\"] = HEAPU16 = new Uint16Array(buf);Module[\"HEAPU32\"] = HEAPU32 = new Uint32Array(buf);Module[\"HEAPF32\"] = HEAPF32 = new Float32Array(buf);Module[\"HEAPF64\"] = HEAPF64 = new Float64Array(buf);\n    }var DYNAMIC_BASE = 5251792,\n        DYNAMICTOP_PTR = 8752;var INITIAL_TOTAL_MEMORY = Module[\"TOTAL_MEMORY\"] || 16777216;if (Module[\"wasmMemory\"]) {\n      wasmMemory = Module[\"wasmMemory\"];\n    } else {\n      wasmMemory = new WebAssembly.Memory({ \"initial\": INITIAL_TOTAL_MEMORY / WASM_PAGE_SIZE });\n    }if (wasmMemory) {\n      buffer = wasmMemory.buffer;\n    }INITIAL_TOTAL_MEMORY = buffer.byteLength;updateGlobalBufferAndViews(buffer);HEAP32[DYNAMICTOP_PTR >> 2] = DYNAMIC_BASE;function callRuntimeCallbacks(callbacks) {\n      while (callbacks.length > 0) {\n        var callback = callbacks.shift();if (typeof callback == \"function\") {\n          callback();continue;\n        }var func = callback.func;if (typeof func === \"number\") {\n          if (callback.arg === undefined) {\n            Module[\"dynCall_v\"](func);\n          } else {\n            Module[\"dynCall_vi\"](func, callback.arg);\n          }\n        } else {\n          func(callback.arg === undefined ? null : callback.arg);\n        }\n      }\n    }var __ATPRERUN__ = [];var __ATINIT__ = [];var __ATMAIN__ = [];var __ATPOSTRUN__ = [];var runtimeInitialized = false;function preRun() {\n      if (Module[\"preRun\"]) {\n        if (typeof Module[\"preRun\"] == \"function\") Module[\"preRun\"] = [Module[\"preRun\"]];while (Module[\"preRun\"].length) {\n          addOnPreRun(Module[\"preRun\"].shift());\n        }\n      }callRuntimeCallbacks(__ATPRERUN__);\n    }function initRuntime() {\n      runtimeInitialized = true;callRuntimeCallbacks(__ATINIT__);\n    }function preMain() {\n      callRuntimeCallbacks(__ATMAIN__);\n    }function postRun() {\n      if (Module[\"postRun\"]) {\n        if (typeof Module[\"postRun\"] == \"function\") Module[\"postRun\"] = [Module[\"postRun\"]];while (Module[\"postRun\"].length) {\n          addOnPostRun(Module[\"postRun\"].shift());\n        }\n      }callRuntimeCallbacks(__ATPOSTRUN__);\n    }function addOnPreRun(cb) {\n      __ATPRERUN__.unshift(cb);\n    }function addOnPostRun(cb) {\n      __ATPOSTRUN__.unshift(cb);\n    }var runDependencies = 0;var runDependencyWatcher = null;var dependenciesFulfilled = null;function addRunDependency(id) {\n      runDependencies++;if (Module[\"monitorRunDependencies\"]) {\n        Module[\"monitorRunDependencies\"](runDependencies);\n      }\n    }function removeRunDependency(id) {\n      runDependencies--;if (Module[\"monitorRunDependencies\"]) {\n        Module[\"monitorRunDependencies\"](runDependencies);\n      }if (runDependencies == 0) {\n        if (runDependencyWatcher !== null) {\n          clearInterval(runDependencyWatcher);runDependencyWatcher = null;\n        }if (dependenciesFulfilled) {\n          var callback = dependenciesFulfilled;dependenciesFulfilled = null;callback();\n        }\n      }\n    }Module[\"preloadedImages\"] = {};Module[\"preloadedAudios\"] = {};function abort(what) {\n      if (Module[\"onAbort\"]) {\n        Module[\"onAbort\"](what);\n      }what += \"\";out(what);err(what);ABORT = true;EXITSTATUS = 1;what = \"abort(\" + what + \"). Build with -s ASSERTIONS=1 for more info.\";throw new WebAssembly.RuntimeError(what);\n    }var dataURIPrefix = \"data:application/octet-stream;base64,\";function isDataURI(filename) {\n      return String.prototype.startsWith ? filename.startsWith(dataURIPrefix) : filename.indexOf(dataURIPrefix) === 0;\n    }var wasmBinaryFile = \"TinyH264.wasm\";if (!isDataURI(wasmBinaryFile)) {\n      wasmBinaryFile = locateFile(wasmBinaryFile);\n    }function getBinary() {\n      try {\n        if (wasmBinary) {\n          return new Uint8Array(wasmBinary);\n        }if (readBinary) {\n          return readBinary(wasmBinaryFile);\n        } else {\n          throw \"both async and sync fetching of the wasm failed\";\n        }\n      } catch (err) {\n        abort(err);\n      }\n    }function getBinaryPromise() {\n      if (!wasmBinary && (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) && typeof fetch === \"function\") {\n        return fetch(wasmBinaryFile, { credentials: \"same-origin\" }).then(function (response) {\n          if (!response[\"ok\"]) {\n            throw \"failed to load wasm binary file at '\" + wasmBinaryFile + \"'\";\n          }return response[\"arrayBuffer\"]();\n        }).catch(function () {\n          return getBinary();\n        });\n      }return new Promise(function (resolve, reject) {\n        resolve(getBinary());\n      });\n    }function createWasm() {\n      var info = { \"env\": asmLibraryArg, \"wasi_snapshot_preview1\": asmLibraryArg };function receiveInstance(instance, module) {\n        var exports = instance.exports;Module[\"asm\"] = exports;removeRunDependency(\"wasm-instantiate\");\n      }addRunDependency(\"wasm-instantiate\");function receiveInstantiatedSource(output) {\n        receiveInstance(output[\"instance\"]);\n      }function instantiateArrayBuffer(receiver) {\n        return getBinaryPromise().then(function (binary) {\n          return WebAssembly.instantiate(binary, info);\n        }).then(receiver, function (reason) {\n          err(\"failed to asynchronously prepare wasm: \" + reason);abort(reason);\n        });\n      }function instantiateAsync() {\n        if (!wasmBinary && typeof WebAssembly.instantiateStreaming === \"function\" && !isDataURI(wasmBinaryFile) && typeof fetch === \"function\") {\n          fetch(wasmBinaryFile, { credentials: \"same-origin\" }).then(function (response) {\n            var result = WebAssembly.instantiateStreaming(response, info);return result.then(receiveInstantiatedSource, function (reason) {\n              err(\"wasm streaming compile failed: \" + reason);err(\"falling back to ArrayBuffer instantiation\");instantiateArrayBuffer(receiveInstantiatedSource);\n            });\n          });\n        } else {\n          return instantiateArrayBuffer(receiveInstantiatedSource);\n        }\n      }if (Module[\"instantiateWasm\"]) {\n        try {\n          var exports = Module[\"instantiateWasm\"](info, receiveInstance);return exports;\n        } catch (e) {\n          err(\"Module.instantiateWasm callback failed with error: \" + e);return false;\n        }\n      }instantiateAsync();return {};\n    }__ATINIT__.push({ func: function func() {\n        ___wasm_call_ctors();\n      } });function _emscripten_get_heap_size() {\n      return HEAP8.length;\n    }function _emscripten_memcpy_big(dest, src, num) {\n      HEAPU8.set(HEAPU8.subarray(src, src + num), dest);\n    }function emscripten_realloc_buffer(size) {\n      try {\n        wasmMemory.grow(size - buffer.byteLength + 65535 >> 16);updateGlobalBufferAndViews(wasmMemory.buffer);return 1;\n      } catch (e) {}\n    }function _emscripten_resize_heap(requestedSize) {\n      var oldSize = _emscripten_get_heap_size();var PAGE_MULTIPLE = 65536;var maxHeapSize = 2147483648 - PAGE_MULTIPLE;if (requestedSize > maxHeapSize) {\n        return false;\n      }var minHeapSize = 16777216;for (var cutDown = 1; cutDown <= 4; cutDown *= 2) {\n        var overGrownHeapSize = oldSize * (1 + .2 / cutDown);overGrownHeapSize = Math.min(overGrownHeapSize, requestedSize + 100663296);var newSize = Math.min(maxHeapSize, alignUp(Math.max(minHeapSize, requestedSize, overGrownHeapSize), PAGE_MULTIPLE));var replacement = emscripten_realloc_buffer(newSize);if (replacement) {\n          return true;\n        }\n      }return false;\n    }var asmLibraryArg = { \"a\": _emscripten_memcpy_big, \"b\": _emscripten_resize_heap, \"memory\": wasmMemory, \"table\": wasmTable };var asm = createWasm();Module[\"asm\"] = asm;var ___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = function () {\n      return (___wasm_call_ctors = Module[\"___wasm_call_ctors\"] = Module[\"asm\"][\"c\"]).apply(null, arguments);\n    };var _h264bsdInit = Module[\"_h264bsdInit\"] = function () {\n      return (_h264bsdInit = Module[\"_h264bsdInit\"] = Module[\"asm\"][\"d\"]).apply(null, arguments);\n    };var _malloc = Module[\"_malloc\"] = function () {\n      return (_malloc = Module[\"_malloc\"] = Module[\"asm\"][\"e\"]).apply(null, arguments);\n    };var _free = Module[\"_free\"] = function () {\n      return (_free = Module[\"_free\"] = Module[\"asm\"][\"f\"]).apply(null, arguments);\n    };var _h264bsdDecode = Module[\"_h264bsdDecode\"] = function () {\n      return (_h264bsdDecode = Module[\"_h264bsdDecode\"] = Module[\"asm\"][\"g\"]).apply(null, arguments);\n    };var _h264bsdShutdown = Module[\"_h264bsdShutdown\"] = function () {\n      return (_h264bsdShutdown = Module[\"_h264bsdShutdown\"] = Module[\"asm\"][\"h\"]).apply(null, arguments);\n    };var _h264bsdAlloc = Module[\"_h264bsdAlloc\"] = function () {\n      return (_h264bsdAlloc = Module[\"_h264bsdAlloc\"] = Module[\"asm\"][\"i\"]).apply(null, arguments);\n    };var _h264bsdFree = Module[\"_h264bsdFree\"] = function () {\n      return (_h264bsdFree = Module[\"_h264bsdFree\"] = Module[\"asm\"][\"j\"]).apply(null, arguments);\n    };Module[\"asm\"] = asm;Module[\"getValue\"] = getValue;var calledRun;Module[\"then\"] = function (func) {\n      if (calledRun) {\n        func(Module);\n      } else {\n        var old = Module[\"onRuntimeInitialized\"];Module[\"onRuntimeInitialized\"] = function () {\n          if (old) old();func(Module);\n        };\n      }return Module;\n    };dependenciesFulfilled = function runCaller() {\n      if (!calledRun) run();if (!calledRun) dependenciesFulfilled = runCaller;\n    };function run(args) {\n      args = args || arguments_;if (runDependencies > 0) {\n        return;\n      }preRun();if (runDependencies > 0) return;function doRun() {\n        if (calledRun) return;calledRun = true;if (ABORT) return;initRuntime();preMain();if (Module[\"onRuntimeInitialized\"]) Module[\"onRuntimeInitialized\"]();postRun();\n      }if (Module[\"setStatus\"]) {\n        Module[\"setStatus\"](\"Running...\");setTimeout(function () {\n          setTimeout(function () {\n            Module[\"setStatus\"](\"\");\n          }, 1);doRun();\n        }, 1);\n      } else {\n        doRun();\n      }\n    }Module[\"run\"] = run;if (Module[\"preInit\"]) {\n      if (typeof Module[\"preInit\"] == \"function\") Module[\"preInit\"] = [Module[\"preInit\"]];while (Module[\"preInit\"].length > 0) {\n        Module[\"preInit\"].pop()();\n      }\n    }noExitRuntime = true;run();\n\n    return Module;\n  };\n}();\nif ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && (typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object') module.exports = Module;else if (typeof define === 'function' && define['amd']) define([], function () {\n  return Module;\n});else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') exports[\"Module\"] = Module;","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"b236a27a1dcc54aa309b.worker.js\");\n};","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//\n//  Copyright (c) 2013 Sam Leitch. All rights reserved.\n//\n//  Permission is hereby granted, free of charge, to any person obtaining a copy\n//  of this software and associated documentation files (the \"Software\"), to\n//  deal in the Software without restriction, including without limitation the\n//  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n//  sell copies of the Software, and to permit persons to whom the Software is\n//  furnished to do so, subject to the following conditions:\n//\n//  The above copyright notice and this permission notice shall be included in\n//  all copies or substantial portions of the Software.\n//\n//  THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n//  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n//  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n//  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n//  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n//  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n//  IN THE SOFTWARE.\n//\n\n/**\n * This class wraps the details of the h264bsd library.\n * Module object is an Emscripten module provided globally by TinyH264.js\n *\n * In order to use this class, you first queue encoded data using queueData.\n * Each call to decode() will decode a single encoded element.\n * When decode() returns H264bsdDecoder.PIC_RDY, a picture is ready in the output buffer.\n * You can also use the onPictureReady() function to determine when a picture is ready.\n * The output buffer can be accessed by calling getNextOutputPicture()\n * An output picture may also be decoded using an H264bsdCanvas.\n * When you're done decoding, make sure to call release() to clean up internal buffers.\n */\nvar TinyH264Decoder = function () {\n  function TinyH264Decoder(tinyH264Module, onPictureReady) {\n    _classCallCheck(this, TinyH264Decoder);\n\n    this.tinyH264Module = tinyH264Module;\n\n    this.onPictureReady = onPictureReady;\n\n    this.pStorage = this.tinyH264Module._h264bsdAlloc();\n    this.pWidth = this.tinyH264Module._malloc(4);\n    this.pHeight = this.tinyH264Module._malloc(4);\n    this.pPicture = this.tinyH264Module._malloc(4);\n\n    this._decBuffer = this.tinyH264Module._malloc(1024 * 1024);\n\n    this.tinyH264Module._h264bsdInit(this.pStorage, 0);\n  }\n\n  TinyH264Decoder.prototype.release = function release() {\n    var pStorage = this.pStorage;\n\n    if (pStorage !== 0) {\n      this.tinyH264Module._h264bsdShutdown(pStorage);\n      this.tinyH264Module._h264bsdFree(pStorage);\n    }\n\n    this.tinyH264Module._free(this.pWidth);\n    this.tinyH264Module._free(this.pHeight);\n    this.tinyH264Module._free(this.pPicture);\n\n    this.pStorage = 0;\n\n    this.pWidth = 0;\n    this.pHeight = 0;\n  };\n\n  TinyH264Decoder.prototype.decode = function decode(nal) {\n    if (nal instanceof ArrayBuffer) {\n      nal = new Uint8Array(nal);\n    }\n\n    this.tinyH264Module.HEAPU8.set(nal, this._decBuffer);\n\n    var retCode = this.tinyH264Module._h264bsdDecode(this.pStorage, this._decBuffer, nal.byteLength, this.pPicture, this.pWidth, this.pHeight);\n    if (retCode === TinyH264Decoder.PIC_RDY) {\n      var width = this.tinyH264Module.getValue(this.pWidth, 'i32');\n      var height = this.tinyH264Module.getValue(this.pHeight, 'i32');\n      var picPtr = this.tinyH264Module.getValue(this.pPicture, 'i8*');\n      var pic = new Uint8Array(this.tinyH264Module.HEAPU8.subarray(picPtr, picPtr + width * height * 3 / 2));\n      this.onPictureReady(pic, width, height);\n    }\n  };\n\n  return TinyH264Decoder;\n}();\n\nTinyH264Decoder.RDY = 0;\nTinyH264Decoder.PIC_RDY = 1;\nTinyH264Decoder.HDRS_RDY = 2;\nTinyH264Decoder.ERROR = 3;\nTinyH264Decoder.PARAM_SET_ERROR = 4;\n\nTinyH264Decoder.MEMALLOC_ERROR = 5;\n\nexport default TinyH264Decoder;","export default __webpack_public_path__ + \"f99175d3b657e4fac2c971aa69fe9513.asset\";","import YUVSurfaceShader from './YUVSurfaceShader'\nimport Texture from './Texture'\n\nclass CanvasRenderer {\n  constructor(canvas) {\n    this.canvas = canvas;\n    const gl = canvas.getContext('webgl')\n    this.yuvSurfaceShader = YUVSurfaceShader.create(gl)\n    this.yTexture = Texture.create(gl, gl.LUMINANCE)\n    this.uTexture = Texture.create(gl, gl.LUMINANCE)\n    this.vTexture = Texture.create(gl, gl.LUMINANCE)\n  }\n\n  /**\n   * @param {Uint8Array}buffer\n   * @param {number}width\n   * @param {number}height\n   */\n  onPicture (buffer, width, height) {\n    let canvas = this.canvas;\n\n    canvas.width = width\n    canvas.height = height\n\n    // the width & height returned are actually padded, so we have to use the frame size to get the real image dimension\n    // when uploading to texture\n    const stride = width // stride\n    // height is padded with filler rows\n\n    // if we knew the size of the video before encoding, we could cut out the black filler pixels. We don't, so just set\n    // it to the size after encoding\n    const sourceWidth = width\n    const sourceHeight = height\n    const maxXTexCoord = sourceWidth / stride\n    const maxYTexCoord = sourceHeight / height\n\n    const lumaSize = stride * height\n    const chromaSize = lumaSize >> 2\n\n    const yBuffer = buffer.subarray(0, lumaSize)\n    const uBuffer = buffer.subarray(lumaSize, lumaSize + chromaSize)\n    const vBuffer = buffer.subarray(lumaSize + chromaSize, lumaSize + (2 * chromaSize))\n\n    const chromaHeight = height >> 1\n    const chromaStride = stride >> 1\n\n    // we upload the entire image, including stride padding & filler rows. The actual visible image will be mapped\n    // from texture coordinates as to crop out stride padding & filler rows using maxXTexCoord and maxYTexCoord.\n\n    let yTexture = this.yTexture;\n    let uTexture = this.uTexture;\n    let vTexture = this.vTexture;\n\n    yTexture.image2dBuffer(yBuffer, stride, height)\n    uTexture.image2dBuffer(uBuffer, chromaStride, chromaHeight)\n    vTexture.image2dBuffer(vBuffer, chromaStride, chromaHeight)\n\n    this.yuvSurfaceShader.setTexture(yTexture, uTexture, vTexture)\n    this.yuvSurfaceShader.updateShaderData({ w: width, h: height }, { maxXTexCoord, maxYTexCoord })\n    this.yuvSurfaceShader.draw()\n  }\n}\n\nexport default CanvasRenderer;","import TinyH264Decoder from 'tinyh264/es/TinyH264Decoder'\nimport TinyH264 from 'tinyh264/es//TinyH264'\nimport tinyH264WasmURL from 'tinyh264/es//TinyH264.wasm.asset'\nimport CanvasRenderer from './CanvasRenderer'\nimport CanvasRendererWorker from './CanvasRenderer.worker'\n\nconst assets = {\n  'TinyH264.wasm': tinyH264WasmURL\n}\n\n/**\n * @param {*}module\n */\nfunction loadNativeModule (module) {\n  return new Promise(resolve => {\n    if (module.calledRun) {\n      resolve()\n    } else {\n      module.onRuntimeInitialized = () => resolve()\n    }\n  })\n}\n\nasync function init () {\n  const tinyH264 = TinyH264({ locateFile: path => assets[path] })\n  await loadNativeModule(tinyH264)\n\n  let canvasRenderer\n  let canvasWorker\n  let decoder = new TinyH264Decoder(tinyH264, (output, width, height) => {\n    if (canvasRenderer) {\n      canvasRenderer.onPicture(output, width, height)\n    }\n    else if (canvasWorker) {\n      canvasWorker.postMessage({\n        type: 'pictureReady',\n        width: width,\n        height: height,\n        data: output.buffer\n      }, [output.buffer])\n    }\n    else {\n      postMessage({\n        type: 'pictureReady',\n        width: width,\n        height: height,\n        data: output.buffer\n      }, [output.buffer])\n    }\n  })\n\n  const useCanvasWorker = true;\n\n  self.addEventListener('message', (e) => {\n    const message = e.data\n    const messageType = message.type\n    switch (messageType) {\n      case 'canvas': {\n        let canvas = message.canvas;\n        if (!useCanvasWorker) {\n          canvasRenderer = new CanvasRenderer(canvas);\n        }\n        else {\n          canvasWorker = new CanvasRendererWorker();\n          canvasWorker.postMessage({\n            type: 'canvas',\n            canvas,\n          }, [canvas])\n        }\n        break\n      }\n      case 'decode': {\n        decoder.decode(new Uint8Array(message.data, message.offset, message.length))\n        postMessage({\n          type: 'decoded',\n        });\n        break\n      }\n      case 'release': {\n        if (decoder) {\n          decoder.release()\n          if (canvasWorker) {\n            canvasWorker.terminate()\n            canvasWorker = undefined;\n          }\n          decoder = undefined;\n        }\n        break\n      }\n    }\n  })\n\n  self.postMessage({ 'type': 'decoderReady' })\n}\n\ninit()\n"],"sourceRoot":""}